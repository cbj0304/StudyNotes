
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>mysql及索引优化 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="gdb和makefile.html" />
    
    
    <link rel="prev" href="R语言.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../">
            
                <a href="../">
            
                    
                    学习笔记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    第一章--语言类
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="c++11新特性.html">
            
                <a href="c++11新特性.html">
            
                    
                    c++11新特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="STL.html">
            
                <a href="STL.html">
            
                    
                    STL标准模板库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="python语言.html">
            
                <a href="python语言.html">
            
                    
                    python语言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="shell脚本.html">
            
                <a href="shell脚本.html">
            
                    
                    shell脚本
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="libc函数库.html">
            
                <a href="libc函数库.html">
            
                    
                    libc函数库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="R语言.html">
            
                <a href="R语言.html">
            
                    
                    R语言
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.7" data-path="mysql及索引优化.html">
            
                <a href="mysql及索引优化.html">
            
                    
                    mysql及索引优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="gdb和makefile.html">
            
                <a href="gdb和makefile.html">
            
                    
                    gdb和makefile
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../2框架类/">
            
                <a href="../2框架类/">
            
                    
                    第二章--框架类
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../2框架类/flask框架.html">
            
                <a href="../2框架类/flask框架.html">
            
                    
                    flask框架
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../2框架类/scrapy框架_fake.html">
            
                <a href="../2框架类/scrapy框架_fake.html">
            
                    
                    scrapy框架
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../2框架类/brpc框架.html">
            
                <a href="../2框架类/brpc框架.html">
            
                    
                    brpc框架
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../2框架类/elasticSearch.html">
            
                <a href="../2框架类/elasticSearch.html">
            
                    
                    elasticSearch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../2框架类/redis.html">
            
                <a href="../2框架类/redis.html">
            
                    
                    redis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../2框架类/reverse_index.html">
            
                <a href="../2框架类/reverse_index.html">
            
                    
                    reverse_index
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../3算法类/">
            
                <a href="../3算法类/">
            
                    
                    第三章--算法类
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../3算法类/leetcode题型总结.html">
            
                <a href="../3算法类/leetcode题型总结.html">
            
                    
                    leetcode题型总结
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../3算法类/数据结构_链表.html">
            
                <a href="../3算法类/数据结构_链表.html">
            
                    
                    数据结构_链表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../3算法类/数据结构_树.html">
            
                <a href="../3算法类/数据结构_树.html">
            
                    
                    数据结构_树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../3算法类/数据结构_图.html">
            
                <a href="../3算法类/数据结构_图.html">
            
                    
                    数据结构_图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../3算法类/数据结构_堆_栈_队列.html">
            
                <a href="../3算法类/数据结构_堆_栈_队列.html">
            
                    
                    数据结构堆栈_队列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../3算法类/数据结构_字符串_哈希.html">
            
                <a href="../3算法类/数据结构_字符串_哈希.html">
            
                    
                    数据结构字符串哈希
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../3算法类/数据结构_字典树_并查集_线段树.html">
            
                <a href="../3算法类/数据结构_字典树_并查集_线段树.html">
            
                    
                    数据结构字典树并查集_线段树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../3算法类/算法_排序.html">
            
                <a href="../3算法类/算法_排序.html">
            
                    
                    算法_排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../3算法类/算法_动态规划.html">
            
                <a href="../3算法类/算法_动态规划.html">
            
                    
                    算法_动态规划
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="../3算法类/算法_回溯.html">
            
                <a href="../3算法类/算法_回溯.html">
            
                    
                    算法_回溯
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="../3算法类/算法_搜索.html">
            
                <a href="../3算法类/算法_搜索.html">
            
                    
                    算法_搜索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.12" data-path="../3算法类/算法_贪心.html">
            
                <a href="../3算法类/算法_贪心.html">
            
                    
                    算法_贪心
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.13" data-path="../3算法类/正则表达式.html">
            
                <a href="../3算法类/正则表达式.html">
            
                    
                    正则表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.14" data-path="../3算法类/设计模式.html">
            
                <a href="../3算法类/设计模式.html">
            
                    
                    设计模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../4工具类/">
            
                <a href="../4工具类/">
            
                    
                    第四章--工具类
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../4工具类/vscode使用.html">
            
                <a href="../4工具类/vscode使用.html">
            
                    
                    vscode使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../4工具类/markdown语法.html">
            
                <a href="../4工具类/markdown语法.html">
            
                    
                    markdown语法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../5其他/">
            
                <a href="../5其他/">
            
                    
                    第五章--其他
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../5其他/学习代码.html">
            
                <a href="../5其他/学习代码.html">
            
                    
                    学习代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../5其他/学习网站.html">
            
                <a href="../5其他/学习网站.html">
            
                    
                    学习网站
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >mysql及索引优化</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>[TOC]</p>
<h1 id="mysql&#x73AF;&#x5883;&#x914D;&#x7F6E;">mysql&#x73AF;&#x5883;&#x914D;&#x7F6E;</h1>
<ul>
<li><p><strong>&#x5B98;&#x7F51;</strong></p>
<p>MySQL&#x5B98;&#x7F51;&#xFF1A;<a href="https://www.mysql.com/" target="_blank">https://www.mysql.com/</a><br>MySQL&#x4E0B;&#x8F7D;&#xFF1A;<a href="https://dev.mysql.com/downloads/mirrors/" target="_blank">https://dev.mysql.com/downloads/mirrors/</a>  </p>
</li>
<li><p><strong>MySQL&#x7248;&#x672C;</strong></p>
<p>mysql&#x76EE;&#x524D;&#x7248;&#x672C;&#x5DF2;&#x7ECF;&#x5230;8.x&#x4E86;&#xFF0C;&#x4F46;&#x662F;5.x&#x662F;&#x4E3B;&#x6D41;&#x7248;&#x672C;&#xFF0C;&#x63A8;&#x8350;5.5&#x3002;</p>
</li>
<li><p><strong>linux&#x73AF;&#x5883;&#x5B89;&#x88C5;mysql</strong></p>
<ol>
<li><p>&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#xFF1A;<br>&#x5BA2;&#x6237;&#x7AEF;&#xFF1A;MySQL-client-5.5.58-1.el6.x86_64.rpm<br>&#x670D;&#x52A1;&#x7AEF;&#xFF1A;MySQL-server-5.5.58-1.el6.x86_64.rpm  </p>
</li>
<li><p>&#x5B89;&#x88C5;&#xFF1A;  </p>
<pre><code>   rpm -ivh rpm&#x8F6F;&#x4EF6;&#x540D;  
   -i &#xFF1A;&#x5B89;&#x88C5;&#x7684;&#x610F;&#x601D;  
   -v &#xFF1A;&#x53EF;&#x89C6;&#x5316;  
   -h &#xFF1A;&#x663E;&#x793A;&#x5B89;&#x88C5;&#x8FDB;&#x5EA6;  
</code></pre></li>
<li><p>&#x9A8C;&#x8BC1;&#xFF1A;</p>
<pre><code>   mysqladmin --version  
</code></pre></li>
<li><p>&#x542F;&#x505C;&#xFF1A;  </p>
<pre><code>   &#x542F;&#x52A8;mysql&#x5E94;&#x7528;&#xFF1A; service mysql start  
   &#x5173;&#x95ED;&#xFF1A; service mysql stop  
   &#x91CD;&#x542F;&#xFF1A; service mysql restart   
</code></pre></li>
<li><p>&#x95EE;&#x9898;&#x53CA;&#x6CE8;&#x610F;&#x70B9;&#xFF1A;  </p>
<ul>
<li>&#x5982;&#x679C;&#x5B89;&#x88C5;&#x65F6;&#x4E0E;&#x67D0;&#x4E2A;&#x8F6F;&#x4EF6;xxx&#x51B2;&#x7A81;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x5C06;&#x51B2;&#x7A81;&#x7684;&#x8F6F;&#x4EF6;&#x5378;&#x8F7D;&#x6389;&#xFF1A;yun -y remove xxx  </li>
<li>&#x5982;&#x679C;&#x63D0;&#x793A;&quot;GPG keys...&quot;&#x5B89;&#x88C5;&#x5931;&#x8D25;&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;rpm -ivh rpm&#x8F6F;&#x4EF6;&#x540D;  --force --nodoeps  </li>
<li>&#x5B89;&#x88C5;&#x65F6;&#x6709;&#x65E5;&#x5FD7;&#x63D0;&#x793A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#xFF1A;/usr/bin/mysqladmin -u root password &apos;new-password&apos;  </li>
<li>&#x5728;&#x8BA1;&#x7B97;&#x673A;reboot&#x540E;&#x767B;&#x9646;MySQL&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x62A5;&#x9519;&#xFF1A;   &quot;/var/lib/mysql/mysql.sock&#x4E0D;&#x5B58;&#x5728;&quot;<br>  &#x539F;&#x56E0;&#xFF1A;&#x662F;Mysql&#x670D;&#x52A1;&#x6CA1;&#x6709;&#x542F;&#x52A8; &#xFF1B;&#x89E3;&#x51B3;&#xFF1A;&#x542F;&#x52A8;&#x670D;&#x52A1;:  <ol>
<li>&#x6BCF;&#x6B21;&#x4F7F;&#x7528;&#x524D;&#x624B;&#x52A8;&#x542F;&#x52A8;&#x670D;&#x52A1; /etc/init.d/mysql start  </li>
<li>&#x5F00;&#x673A;&#x81EA;&#x542F;  chkconfig mysql on,chkconfig mysql off&#xFF0C;&#x68C0;&#x67E5;&#x5F00;&#x673A;&#x662F;&#x5426;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#xFF1A; ntsysv  </li>
</ol>
</li>
<li>&#x7ED9;mysql &#x7684;&#x8D85;&#x7EA7;&#x7BA1;&#x7406;&#x5458;root &#x589E;&#x52A0;&#x5BC6;&#x7801;&#xFF1A;/usr/bin/mysqladmin -u root password root  </li>
<li>&#x5BA2;&#x6237;&#x7AEF;&#x767B;&#x9646;&#xFF1A;<br>mysql -h{host} -P{port} -uroot -p{password}  -D{database} -e{sql}  # &#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;3306<br>&#x89E3;&#x51B3;&#x4E2D;&#x6587;&#x4E71;&#x7801;&#xFF1A;<br>show variables like &quot;character%&quot;;          # &#x67E5;&#x770B;&#x5F53;&#x524D;&#x5B57;&#x7B26;&#x96C6;<br>set names utf8;                            # &#x7EDF;&#x4E00;&#x7F16;&#x7801;&#x4E3A;utf8  </li>
</ul>
</li>
<li><p>&#x91CD;&#x8981;&#x6587;&#x4EF6;&#x548C;&#x76EE;&#x5F55;  </p>
<ul>
<li>&#x6570;&#x636E;&#x76EE;&#x5F55;&#xFF1A;<br>ps -ef|grep mysql  &#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF1A;<br>&#x6570;&#x636E;&#x5E93;&#x76EE;&#x5F55;&#xFF1A;     datadir=/var/lib/mysql<br>pid&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#xFF1A; --pid-file=/var/lib/mysql/bigdata01.pid  </li>
<li>MySQL&#x6838;&#x5FC3;&#x76EE;&#x5F55;&#xFF1A;<br>/var/lib/mysql:  mysql&#x5B89;&#x88C5;&#x76EE;&#x5F55;<br>/usr/share/mysql:  &#x914D;&#x7F6E;&#x6587;&#x4EF6;<br>/usr/bin&#xFF1A;&#x547D;&#x4EE4;&#x76EE;&#x5F55;&#xFF08;mysqladmin&#x3001;mysqldump&#x7B49;&#xFF09;<br>/etc/init.d/mysql&#x542F;&#x505C;&#x811A;&#x672C;  </li>
<li>MySQL&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br>my-huge.cnf    &#x9AD8;&#x7AEF;&#x670D;&#x52A1;&#x5668;  1-2G&#x5185;&#x5B58;<br>my-large.cnf   &#x4E2D;&#x7B49;&#x89C4;&#x6A21;<br>my-medium.cnf  &#x4E00;&#x822C;<br>my-small.cnf   &#x8F83;&#x5C0F;<br>&#x4F46;&#x662F;&#xFF0C;&#x4EE5;&#x4E0A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;mysql&#x9ED8;&#x8BA4;&#x4E0D;&#x80FD;&#x8BC6;&#x522B;&#xFF0C;&#x9ED8;&#x8BA4;&#x53EA;&#x80FD;&#x8BC6;&#x522B; /etc/my.cnf<br>&#x91C7;&#x7528; my-huge.cnf &#xFF1A;<br>cp /usr/share/mysql/my-huge.cnf /etc/my.cnf<br>&#x6CE8;&#x610F;&#xFF1A;mysql5.5&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/my.cnf&#xFF1B;Mysql5.6 &#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/mysql-default.cnf  </li>
</ul>
</li>
<li><p>&#x8BBE;&#x7F6E;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#xFF1A;  </p>
<pre><code class="lang-mysql"># &#x67E5;&#x8BE2;&#x7F16;&#x7801;&#xFF0C;&#x53D1;&#x73B0;&#x90E8;&#x5206;&#x7F16;&#x7801;&#x662F; latin,&#x9700;&#x8981;&#x7EDF;&#x4E00;&#x8BBE;&#x7F6E;&#x4E3A;utf-8
&gt; show variables like &apos;%char%&apos;;

# &#x8BBE;&#x7F6E;&#x7F16;&#x7801;&#xFF1A;
vi /etc/my.cnf:  
[mysql]  
default-character-set=utf8  
[client]  
default-character-set=utf8  

[mysqld]  
character_set_server=utf8  
character_set_client=utf8  
collation_server=utf8_general_ci  

# &#x91CD;&#x542F;Mysql&#x5E76;&#x786E;&#x8BA4;&#x5B57;&#x7B26;&#x7F16;&#x7801;:  
&gt; service mysql restart
&gt; show variables like &apos;%char%&apos; ;

# &#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;&#x4FEE;&#x6539;&#x7F16;&#x7801; &#x53EA;&#x5BF9;&quot;&#x4E4B;&#x540E;&quot;&#x521B;&#x5EFA;&#x7684;&#x6570;&#x636E;&#x5E93;&#x751F;&#x6548;&#xFF0C;&#x56E0;&#x6B64;&#x5EFA;&#x8BAE;&#x5728;mysql&#x5B89;&#x88C5;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x7EDF;&#x4E00;&#x7F16;&#x7801;&#x3002;  

# &#x5176;&#x4ED6;&#x547D;&#x4EE4;
# &#x6E05;&#x5C4F;(ctrl+L):  
&gt; system clear

# &#x5355;&#x5F15;&#x53F7;&#x548C;&#x53CC;&#x5F15;&#x53F7;&#xFF1A;
-- &#x5355;&#x72EC;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x5355;&#x5F15;&#x53F7;&#x548C;&#x53CC;&#x5F15;&#x53F7;&#x6CA1;&#x6709;&#x533A;&#x522B;&#xFF1B;
-- &#x5D4C;&#x5957;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x53CC;&#x5F15;&#x53F7;&#x548C;&#x5355;&#x5F15;&#x53F7;&#x53EF;&#x4EE5;&#x4E92;&#x76F8;&#x5D4C;&#x5957;&#x3002;&#x628A;&#x5185;&#x90E8;&#x7684;&#x5185;&#x5BB9;&#x5F53;&#x505A;&#x6574;&#x4F53;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x53D8;&#x91CF;&#x3002;

# &#x5355;&#x884C;&#x6CE8;&#x91CA;&#x53EF;&#x4EE5;&#x7528;--(&#x540E;&#x8FB9;&#x52A0;&#x4E00;&#x4E2A;&#x7A7A;&#x683C;)&#xFF0C;&#x6216;&#x8005;#
# &#x591A;&#x884C;&#x6CE8;&#x91CA;&#xFF0C;&#x7528;/* ... */
</code></pre>
</li>
</ol>
</li>
</ul>
<h1 id="&#x539F;&#x7406;">&#x539F;&#x7406;</h1>
<ul>
<li><p><strong>MYSQL&#x903B;&#x8F91;&#x5206;&#x5C42;(&#x4ECE;&#x4E0A;&#x5230;&#x4E0B;)</strong></p>
<ul>
<li>&#x8FDE;&#x63A5;&#x5C42;&#xFF1A;&#x63D0;&#x4F9B;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;&#x670D;&#x52A1;&#x3002;  </li>
<li>&#x670D;&#x52A1;&#x5C42;&#xFF1A;&#x63D0;&#x4F9B;&#x5404;&#x79CD;&#x7528;&#x6237;&#x4F7F;&#x7528;&#x7684;&#x63A5;&#x53E3;&#xFF08;&#x5982;select&#x67E5;&#x8BE2;api&#x7B49;&#xFF09;&#xFF0C;&#x63D0;&#x4F9B;sql&#x4F18;&#x5316;&#x5668;&#xFF08;MySQL Query Optimizer&#xFF09;&#x3002;  </li>
<li>&#x5F15;&#x64CE;&#x5C42;&#xFF1A;&#x63D0;&#x4F9B;&#x5404;&#x79CD;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x7684;&#x65B9;&#x5F0F;&#xFF08;InnoDB&#x3001;MyISM&#xFF09;&#x3002;  </li>
<li>&#x5B58;&#x50A8;&#x5C42;&#xFF1A;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x3002;  </li>
</ul>
</li>
<li><p><strong>&#x6570;&#x636E;&#x5E93;&#x5F15;&#x64CE;&#x5C42;</strong>  </p>
<ul>
<li>InnoDB(&#x9ED8;&#x8BA4;)&#xFF1A;&#x4E8B;&#x52A1;&#x4F18;&#x5148; &#xFF08;&#x9002;&#x5408;&#x9AD8;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#xFF1B;&#x884C;&#x9501;&#xFF09;&#x3002;</li>
<li>MyISAM&#xFF1A;&#x6027;&#x80FD;&#x4F18;&#x5148;&#xFF08;&#x8868;&#x9501;&#xFF09;&#x3002; </li>
<li><p>&#x6307;&#x5B9A;&#x6570;&#x636E;&#x5E93;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x64CE;&#xFF1A;</p>
<pre><code class="lang-mysql">&gt; show engines;  # &#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#x652F;&#x6301;&#x54EA;&#x4E9B;&#x5F15;&#x64CE;  
&gt; show variables like &apos;%storage_engine%&apos; ;  # &#x67E5;&#x770B;&#x5F53;&#x524D;&#x4F7F;&#x7528;&#x7684;&#x5F15;&#x64CE; 

# &#x6307;&#x5B9A;&#x5F15;&#x64CE;
create table tb(
  id int(4) auto_increment ,  
  name varchar(5),  
  dept varchar(5),  
  primary key(id)  
)ENGINE=MyISAM AUTO_INCREMENT=1  DEFAULT CHARSET=utf8;
</code></pre>
</li>
</ul>
</li>
</ul>
<h1 id="sql&#x4F18;&#x5316;">SQL&#x4F18;&#x5316;</h1>
<ul>
<li><p><strong>&#x539F;&#x56E0;</strong> </p>
<p>&#x6027;&#x80FD;&#x4F4E;&#x3001;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x592A;&#x957F;&#x3001;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x592A;&#x957F;&#x3001;SQL&#x8BED;&#x53E5;&#x6B20;&#x4F73;&#xFF08;&#x8FDE;&#x63A5;&#x67E5;&#x8BE2;&#xFF09;&#x3001;&#x7D22;&#x5F15;&#x5931;&#x6548;&#x3001;&#x670D;&#x52A1;&#x5668;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4E0D;&#x5408;&#x7406;&#xFF08;&#x7F13;&#x51B2;&#x3001;&#x7EBF;&#x7A0B;&#x6570;&#xFF09;  </p>
</li>
<li><p><strong>SQL&#x8BED;&#x53E5;&#x6267;&#x884C;&#x8FC7;&#x7A0B;</strong> </p>
<p>&#x7F16;&#x5199;&#x8FC7;&#x7A0B;&#xFF1A;  </p>
<pre><code class="lang-mysql">select dinstinct  ..from  ..join ..on ..where ..group by ..having ..order by ..limit ..
</code></pre>
<p>&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#xFF1A;   </p>
<pre><code class="lang-mysql">from .. on.. join ..where ..group by ....having ...select dinstinct ..order by ..limit ...
</code></pre>
<p>&#x53C2;&#x8003;&#xFF1A; <a href="https://www.cnblogs.com/annsshadow/p/5037667.html" target="_blank">https://www.cnblogs.com/annsshadow/p/5037667.html</a>  </p>
</li>
<li><p><strong>SQL&#x4F18;&#x5316;</strong> </p>
<p>SQL&#x4F18;&#x5316;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x5728;&#x4F18;&#x5316;&#x7D22;&#x5F15;&#xFF0C;&#x7D22;&#x5F15;&#x76F8;&#x5F53;&#x4E8E;&#x4E66;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x662F;&#x5E2E;&#x52A9;MYSQL&#x9AD8;&#x6548;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;  </p>
<p>&#x7D22;&#x5F15;&#x662F;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF08;&#x6811;&#xFF1A;B&#x6811;(&#x901A;&#x5E38;&#x6307;B+&#x6811;&#xFF0C;&#x9ED8;&#x8BA4;)&#x3001;Hash&#x6811;...&#xFF09;    </p>
</li>
<li><p><strong>&#x7D22;&#x5F15;&#x7684;&#x5229;&#x5F0A;</strong></p>
<p>&#x5F0A;&#x7AEF;&#xFF1A;  </p>
<ul>
<li>&#x7D22;&#x5F15;&#x672C;&#x8EAB;&#x5F88;&#x5927;&#xFF0C;&#x53EF;&#x4EE5;&#x5B58;&#x653E;&#x5728;&#x5185;&#x5B58;/&#x786C;&#x76D8;&#xFF08;&#x901A;&#x5E38;&#x4E3A;&#x786C;&#x76D8;&#xFF09;  </li>
<li>&#x7D22;&#x5F15;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x5747;&#x9002;&#x7528;&#xFF1A; a.&#x5C11;&#x91CF;&#x6570;&#x636E;  b.&#x9891;&#x7E41;&#x66F4;&#x65B0;&#x7684;&#x5B57;&#x6BB5;  c.&#x5F88;&#x5C11;&#x4F7F;&#x7528;&#x7684;&#x5B57;&#x6BB5;  </li>
<li>&#x7D22;&#x5F15;&#x4F1A;&#x964D;&#x4F4E;&#x589E;&#x5220;&#x6539;&#x7684;&#x6548;&#x7387;&#xFF08;&#x4E00;&#x822C;&#x63D0;&#x9AD8; &#x67E5; &#x7684;&#x6548;&#x7387;&#xFF09;  </li>
</ul>
<p>&#x4F18;&#x52BF;&#xFF1A;  </p>
<ul>
<li>&#x63D0;&#x9AD8;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#xFF08;&#x964D;&#x4F4E;IO&#x4F7F;&#x7528;&#x7387;&#xFF09;  </li>
<li>&#x964D;&#x4F4E;CPU&#x4F7F;&#x7528;&#x7387; &#xFF08;...order by age desc,&#x56E0;&#x4E3A;B&#x6811;&#x7D22;&#x5F15;&#x672C;&#x8EAB;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x6392;&#x5E8F;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x6392;&#x5E8F;&#x65F6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF09;  </li>
</ul>
</li>
<li><p><strong>&#x7D22;&#x5F15;&#x5206;&#x7C7B;</strong></p>
<ul>
<li><p>&#x5206;&#x7C7B;</p>
<p>&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#xFF1A;&#x4E0D;&#x80FD;&#x91CD;&#x590D;&#x3002;id&#x4E0D;&#x80FD;&#x662F;null<br>&#x552F;&#x4E00;&#x7D22;&#x5F15;&#xFF1A;&#x4E0D;&#x80FD;&#x91CD;&#x590D;&#x3002;id&#x53EF;&#x4EE5;&#x662F;null<br>&#x5355;&#x503C;&#x7D22;&#x5F15;&#xFF1A;&#x5355;&#x5217;&#xFF1B;&#x4E00;&#x4E2A;&#x8868;&#x53EF;&#x4EE5;&#x591A;&#x4E2A;&#x5355;&#x503C;&#x7D22;&#x5F15;,&#x5982; age &#x548C; name&#x3002;<br>&#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF1A;&#x591A;&#x4E2A;&#x5217;&#x6784;&#x6210;&#x7684;&#x7D22;&#x5F15;&#xFF08;&#x76F8;&#x5F53;&#x4E8E;&#x4E8C;&#x7EA7;&#x76EE;&#x5F55;&#xFF09;&#x5982;&#xFF1A;(name,age)  </p>
</li>
<li><p>&#x521B;&#x5EFA;&#x7D22;&#x5F15;</p>
<pre><code class="lang-mysql">-- &#x65B9;&#x5F0F;&#x4E00;&#xFF1A;  
create &#x7D22;&#x5F15;&#x7C7B;&#x578B;  &#x7D22;&#x5F15;&#x540D;  on &#x8868;(&#x5B57;&#x6BB5;)  
-- &#x5355;&#x503C;&#xFF1A;  
create index  dept_index on  tb(dept);  
-- &#x552F;&#x4E00;&#xFF1A;  
create unique index  name_index on tb(name) ;  
-- &#x590D;&#x5408;&#x7D22;&#x5F15;  
create index dept_name_index on tb(dept,name);  

-- &#x65B9;&#x5F0F;&#x4E8C;&#xFF1A;
alter table &#x8868;&#x540D; &#x7D22;&#x5F15;&#x7C7B;&#x578B;  &#x7D22;&#x5F15;&#x540D;&#xFF08;&#x5B57;&#x6BB5;&#xFF09;
-- &#x5355;&#x503C;&#xFF1A;  
alter table tb add index dept_index(dept);  
-- &#x552F;&#x4E00;&#xFF1A;  
alter table tb add unique index name_index(name);  
-- &#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF1A;
alter table tb add index dept_name_index(dept,name);  

-- &#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x662F;primary key&#xFF0C;&#x5219;&#x8BE5;&#x5B57;&#x6BB5;&#x9ED8;&#x8BA4;&#x5C31;&#x662F;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x3002;
</code></pre>
</li>
<li><p>&#x5220;&#x9664;&#x7D22;&#x5F15;</p>
<pre><code class="lang-mysql">drop index &#x7D22;&#x5F15;&#x540D; on &#x8868;&#x540D; ;  
drop index name_index on tb ;
</code></pre>
</li>
<li><p>&#x67E5;&#x8BE2;&#x7D22;&#x5F15;</p>
<pre><code class="lang-mysql">show index from &#x8868;&#x540D; ;  
show index from &#x8868;&#x540D; \G
</code></pre>
</li>
</ul>
</li>
</ul>
<h1 id="&#x5206;&#x6790;&#x6267;&#x884C;&#x8BA1;&#x5212;">&#x5206;&#x6790;&#x6267;&#x884C;&#x8BA1;&#x5212;</h1>
<h2 id="sql&#x6267;&#x884C;&#x8BA1;&#x5212;"><strong>SQL&#x6267;&#x884C;&#x8BA1;&#x5212;</strong></h2>
<ul>
<li><p>&#x5206;&#x6790;SQL&#x7684;&#x6267;&#x884C;&#x8BA1;&#x5212;(explain + SQL&#x8BED;&#x53E5;)&#xFF0C;&#x53EF;&#x4EE5;&#x6A21;&#x62DF;SQL&#x4F18;&#x5316;&#x5668;&#x6267;&#x884C;SQL&#x8BED;&#x53E5;&#xFF0C;&#x8BA9;&#x5F00;&#x53D1;&#x8005;&#x4E86;&#x89E3;&#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;SQL&#x72B6;&#x51B5;&#x3002;<br>MySQL&#x67E5;&#x8BE2;&#x4F18;&#x5316;&#x5668;&#x4F1A;&#x5E72;&#x6270;&#x6211;&#x4EEC;&#x7684;&#x4F18;&#x5316;&#x3002;  </p>
</li>
<li><p>&#x4F18;&#x5316;&#x65B9;&#x6CD5;&#xFF0C;&#x53C2;&#x8003;&#x5B98;&#x7F51;&#xFF1A;
<a href="https://dev.mysql.com/doc/refman/5.5/en/optimization.html" target="_blank">https://dev.mysql.com/doc/refman/5.5/en/optimization.html</a>  </p>
</li>
<li><p>SQL&#x6267;&#x884C;&#x8BA1;&#x5212;&#x5404;&#x5B57;&#x6BB5;&#x8BF4;&#x660E;</p>
<pre><code class="lang-mysql">
mysql&gt; explain select count(*) from hotelnoprice \G
*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: hotelnoprice
         type: index
possible_keys: NULL
          key: ux_base_hotel_id
      key_len: 4
          ref: NULL
         rows: 373415
        Extra: Using index
1 row in set (0.00 sec)
</code></pre>
<p>&#x8BF4;&#x660E;&#xFF1A;</p>
<ul>
<li>id : &#x7F16;&#x53F7;
&#x200B;<em> id&#x503C;&#x76F8;&#x540C;&#xFF0C;&#x4ECE;&#x4E0A;&#x5F80;&#x4E0B; &#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF1B;
&#x200B;</em> id&#x503C;&#x4E0D;&#x540C;&#xFF1A;id&#x503C;&#x8D8A;&#x5927;&#x8D8A;&#x4F18;&#x5148;&#x67E5;&#x8BE2; (&#x672C;&#x8D28;&#xFF1A;&#x5728;&#x5D4C;&#x5957;&#x5B50;&#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x5148;&#x67E5;&#x5185;&#x5C42; &#x518D;&#x67E5;&#x5916;&#x5C42;)     </li>
<li>select_type &#xFF1A;&#x67E5;&#x8BE2;&#x7C7B;&#x578B;  </li>
<li>table &#xFF1A;&#x8868;  </li>
<li>type&#xFF1A;&#x7D22;&#x5F15;&#x7C7B;&#x578B;  </li>
<li>possible_keys &#xFF1A;&#x9884;&#x6D4B;&#x7528;&#x5230;&#x7684;&#x7D22;&#x5F15;</li>
<li>key  &#xFF1A;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x7684;&#x7D22;&#x5F15;  </li>
<li>key_len &#xFF1A;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x7684;&#x957F;&#x5EA6;</li>
<li>ref  : &#x8868;&#x4E4B;&#x95F4;&#x7684;&#x5F15;&#x7528;  </li>
<li>rows &#xFF1A;&#x901A;&#x8FC7;&#x7D22;&#x5F15;&#x67E5;&#x8BE2;&#x5230;&#x7684;&#x6570;&#x636E;&#x91CF;</li>
<li>Extra : &#x989D;&#x5916;&#x7684;&#x4FE1;&#x606F;  </li>
</ul>
</li>
</ul>
<h2 id="sql&#x6267;&#x884C;&#x8BA1;&#x5212;&#x5B57;&#x6BB5;&#x8BE6;&#x89E3;"><strong>sql&#x6267;&#x884C;&#x8BA1;&#x5212;&#x5B57;&#x6BB5;&#x8BE6;&#x89E3;</strong></h2>
<h3 id="&#x51C6;&#x5907;&#x6570;&#x636E;&#xFF1A;"><strong>&#x51C6;&#x5907;&#x6570;&#x636E;&#xFF1A;</strong></h3>
<pre><code class="lang-mysql">  create table course
  (
  cid int(3),
  cname varchar(20),
  tid int(3)
  );

  create table teacher
  (
  tid int(3),
  tname varchar(20),
  tcid int(3)
  );

  create table teacherCard
  (
  tcid int(3),
  tcdesc varchar(200)
  );

  insert into course values(1,&apos;java&apos;,1);
  insert into course values(2,&apos;html&apos;,1);
  insert into course values(3,&apos;sql&apos;,2);
  insert into course values(4,&apos;web&apos;,3);

  insert into teacher values(1,&apos;tz&apos;,1);
  insert into teacher values(2,&apos;tw&apos;,2);
  insert into teacher values(3,&apos;tl&apos;,3);

  insert into teacherCard values(1,&apos;tzdesc&apos;) ;
  insert into teacherCard values(2,&apos;twdesc&apos;) ;
  insert into teacherCard values(3,&apos;tldesc&apos;) ;
</code></pre>
<ul>
<li><p>&#x8BFE;&#x7A0B;&#x8868;course&#xFF1A;
&#x8BFE;&#x7A0B;id&#xFF0C;&#x8BFE;&#x7A0B;&#x540D;&#x79F0;&#xFF0C;&#x6559;&#x5E08;id  </p>
<p>| cid  | cname  | tid  |
| ---- | ------ | ---- |
| 1    | c++    | 1    |
| 2    | html   | 1    |
| 3    | sql    | 2    |
| 4    | python | 3    |</p>
</li>
<li><p>&#x6559;&#x5E08;&#x8868;teacher&#xFF1A;
  &#x6559;&#x5E08;id&#xFF0C;&#x6559;&#x5E08;&#x540D;&#x79F0;&#xFF0C;&#x6559;&#x5E08;&#x5361;&#x53F7;</p>
<p>| tid  | tname | tcid              |
| ---- | ----- | ----------------- |
| 1    | zs    | 1                 |
| 2    | ls    | 2                 |
| 3    | ww    | 3&#x6559;&#x5E08;&#x8BC1;&#x8868;teacherCard&#xFF1A; |</p>
</li>
<li><p>&#x6559;&#x5E08;&#x8BC1;&#x8868;teacherCard:</p>
<p>&#x6559;&#x5E08;&#x8BC1;&#x53F7;&#xFF0C;&#x6559;&#x5E08;&#x63CF;&#x8FF0;</p>
<p>| tcid | tcdesc |
| ---- | ------ |
| 1    | zsdesc |
| 2    | lsdesc |
| 3    | wwdesc |</p>
</li>
</ul>
<h3 id="-id">@  id</h3>
<p>  &#x6848;&#x4F8B;1&#xFF1A;&#x67E5;&#x8BE2;&#x8BFE;&#x7A0B;&#x7F16;&#x53F7;&#x4E3A;2 &#x6216; &#x6559;&#x5E08;&#x8BC1;&#x7F16;&#x53F7;&#x4E3A;3 &#x7684;&#x8001;&#x5E08;&#x4FE1;&#x606F;&#x3002;  </p>
<pre><code class="lang-mysql">  explain SELECT * FROM course as c, teacher as t, teacherCard as tc WHERE c.tid=t.tid 
  AND t.tcid=tc.tcid AND (c.cid=2 OR t.tcid=3);
</code></pre>
<p>  &#x6848;&#x4F8B;2&#xFF1A;&#x67E5;&#x8BE2;&#x6559;&#x6388;SQL&#x8BFE;&#x7A0B;&#x7684;&#x8001;&#x5E08;&#x7684;&#x63CF;&#x8FF0;&#xFF08;desc&#xFF09;&#x3002;  </p>
<p>  &#x591A;&#x8868;&#x67E5;&#x8BE2;&#xFF1A;  </p>
<pre><code class="lang-mysql">  explain select tc.tcdesc from teacherCard tc,course c,teacher t where c.tid = t.tid
  and t.tcid = tc.tcid and c.cname = &apos;sql&apos; ;
</code></pre>
<p>  &#x5B50;&#x67E5;&#x8BE2;&#xFF1A;  </p>
<pre><code class="lang-mysql">  explain select tc.tcdesc from teacherCard tc where tc.tcid =
  (select t.tcid from teacher t where  t.tid = 
      (select c.tid from course c where c.cname = &apos;sql&apos;)
  );
</code></pre>
<p>  &#x5B50;&#x67E5;&#x8BE2;+&#x591A;&#x8868;&#x67E5;&#x8BE2;&#xFF1A;   </p>
<pre><code class="lang-mysql">  explain select t.tname ,tc.tcdesc from teacher t,teacherCard tc where t.tcid= tc.tcid
  and t.tid = (select c.tid from course c where cname = &apos;sql&apos;) ;
</code></pre>
<p>  &#x7ED3;&#x8BBA;&#xFF1A;id&#x503C;&#x6709;&#x76F8;&#x540C;&#xFF0C;&#x53C8;&#x6709;&#x4E0D;&#x540C;&#xFF1A; id&#x503C;&#x8D8A;&#x5927;&#x8D8A;&#x4F18;&#x5148;&#xFF1B;id&#x503C;&#x76F8;&#x540C;&#xFF0C;&#x4ECE;&#x4E0A;&#x5F80;&#x4E0B;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x3002;  </p>
<h3 id="-selecttype">@  select_type</h3>
<p>&#x67E5;&#x8BE2;&#x7C7B;&#x578B;:<br>PRIMARY:  &#x5305;&#x542B;&#x5B50;&#x67E5;&#x8BE2;SQL&#x4E2D;&#x7684; &#x4E3B;&#x67E5;&#x8BE2; &#xFF08;&#x6700;&#x5916;&#x5C42;&#xFF09;<br>SUBQUERY&#xFF1A;&#x5305;&#x542B;&#x5B50;&#x67E5;&#x8BE2;SQL&#x4E2D;&#x7684; &#x5B50;&#x67E5;&#x8BE2; &#xFF08;&#x975E;&#x6700;&#x5916;&#x5C42;&#xFF09;<br>simple:  &#x7B80;&#x5355;&#x67E5;&#x8BE2;&#xFF08;&#x4E0D;&#x5305;&#x542B;&#x5B50;&#x67E5;&#x8BE2;&#x3001;union&#xFF09;<br>derived:  &#x884D;&#x751F;&#x67E5;&#x8BE2;(&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x4E34;&#x65F6;&#x8868;)<br>union result :&#x544A;&#x77E5;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#xFF0C;&#x90A3;&#x4E9B;&#x8868;&#x4E4B;&#x95F4;&#x5B58;&#x5728;union&#x67E5;&#x8BE2;</p>
<pre><code class="lang-mysql">-- &#x5728;from&#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#x53EA;&#x6709;&#x4E00;&#x5F20;&#x8868;
explain select  cr.cname from ( select * from course where tid in (1,2) ) cr ;

-- &#x5728;from&#x5B50;&#x67E5;&#x8BE2;&#x4E2D;&#xFF0C; &#x5982;&#x679C;&#x6709;table1 union table2 &#xFF0C;&#x5219;table1 &#x5C31;&#x662F;derived,table2&#x5C31;&#x662F;union
explain select  cr.cname from ( 
select * from course where tid = 1  union select * from course where tid = 2 ) cr ;
</code></pre>
<h3 id="-type">@  type</h3>
<p>&#x7D22;&#x5F15;&#x7C7B;&#x578B;: &#x8D8A;&#x5F80;&#x524D;&#x6027;&#x80FD;&#x8D8A;&#x4F18;&#x3002;<br>&#x5168;&#x90E8;&#x7684;&#xFF1A;system &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt;  index_subquery &gt; range &gt; index &gt; ALL<br>&#x5E38;&#x7528;&#x7684;&#xFF1A;system&gt;const&gt;eq_ref&gt;<strong>ref&gt;range</strong>&gt;index&gt;all<br>&#x8981;&#x5BF9;type&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x7684;&#x524D;&#x63D0;&#xFF1A;&#x6709;&#x7D22;&#x5F15;<br>&#x5176;&#x4E2D;&#xFF1A;system,const&#x53EA;&#x662F;&#x7406;&#x60F3;&#x60C5;&#x51B5;&#xFF1B;&#x5B9E;&#x9645;&#x80FD;&#x8FBE;&#x5230; ref&gt;range  </p>
<ul>
<li><strong>system&#xFF08;&#x5FFD;&#x7565;&#xFF09;:</strong> &#x53EA;&#x6709;&#x4E00;&#x6761;&#x6570;&#x636E;&#x7684;&#x7CFB;&#x7EDF;&#x8868; &#xFF1B;&#x6216; &#x884D;&#x751F;&#x8868;&#x53EA;&#x6709;&#x4E00;&#x6761;&#x6570;&#x636E;&#x7684;&#x4E3B;&#x67E5;&#x8BE2;&#x3002;  </li>
<li><strong>const</strong>: &#x4EC5;&#x4EC5;&#x80FD;&#x67E5;&#x5230;&#x4E00;&#x6761;&#x6570;&#x636E;&#x7684;SQL ,&#x7528;&#x4E8E;Primary key &#x6216;unique&#x7D22;&#x5F15;&#x3002;  </li>
<li><strong>eq_ref</strong>:&#x552F;&#x4E00;&#x6027;&#x7D22;&#x5F15;&#xFF1A;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x7D22;&#x5F15;&#x952E;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x8FD4;&#x56DE;&#x5339;&#x914D;&#x552F;&#x4E00;&#x884C;&#x6570;&#x636E;&#xFF08;&#x6709;&#x4E14;&#x53EA;&#x6709;1&#x4E2A;&#xFF0C;&#x4E0D;&#x80FD;&#x591A; &#x3001;&#x4E0D;&#x80FD;0&#xFF09;&#x3002;</li>
<li><strong>ref</strong>&#xFF1A;&#x975E;&#x552F;&#x4E00;&#x6027;&#x7D22;&#x5F15;&#xFF0C;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x7D22;&#x5F15;&#x952E;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x8FD4;&#x56DE;&#x5339;&#x914D;&#x7684;&#x6240;&#x6709;&#x884C;&#xFF08;0&#xFF0C;&#x591A;&#xFF09;  </li>
<li><strong>range</strong>&#xFF1A;&#x68C0;&#x7D22;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x7684;&#x884C; ,where&#x540E;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x67E5;&#x8BE2;(between  ,&gt; &lt; &gt;=,  &#x7279;&#x6B8A;:in&#x6709;&#x65F6;&#x5019;&#x4F1A;&#x5931;&#x6548; &#xFF0C;&#x4ECE;&#x800C;&#x8F6C;&#x4E3A; &#x65E0;&#x7D22;&#x5F15;all)&#x3002;  </li>
<li><strong>index</strong>&#xFF1A;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x7D22;&#x5F15;&#x4E2D;&#x6570;&#x636E;&#x3002;  </li>
<li><strong>all</strong>&#xFF1A;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;  </li>
</ul>
<pre><code class="lang-mysql">-- **************************  system  **************************
-- system&#xFF08;&#x5FFD;&#x7565;&#xFF09;: &#x53EA;&#x6709;&#x4E00;&#x6761;&#x6570;&#x636E;&#x7684;&#x7CFB;&#x7EDF;&#x8868; &#xFF1B;&#x6216; &#x884D;&#x751F;&#x8868;&#x53EA;&#x6709;&#x4E00;&#x6761;&#x6570;&#x636E;&#x7684;&#x4E3B;&#x67E5;&#x8BE2;
create table test01
(
  tid int(3),
  tname varchar(20)
);

insert into test01 values(1,&apos;a&apos;) ;
commit;
# &#x589E;&#x52A0;&#x7D22;&#x5F15;
alter table test01 add constraint tid_pk primary key(tid) ;
explain select * from (select * from test01 ) t where tid =1 ;

-- **************************  const  **************************
-- const: &#x4EC5;&#x4EC5;&#x80FD;&#x67E5;&#x5230;&#x4E00;&#x6761;&#x6570;&#x636E;&#x7684;SQL ,&#x7528;&#x4E8E;Primary key &#x6216;unique&#x7D22;&#x5F15;
explain select tid from test01 where tid =1 ;
alter table test01 drop primary key ;
create index test01_index on test01(tid) ;

-- **************************  eq_ref  **************************
-- eq_ref:&#x552F;&#x4E00;&#x6027;&#x7D22;&#x5F15;&#xFF1A;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x7D22;&#x5F15;&#x952E;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x8FD4;&#x56DE;&#x5339;&#x914D;&#x552F;&#x4E00;&#x884C;&#x6570;&#x636E;&#xFF08;&#x6709;&#x4E14;&#x53EA;&#x6709;1&#x4E2A;&#xFF0C;&#x4E0D;&#x80FD;&#x591A; &#x3001;&#x4E0D;&#x80FD;0&#xFF09;
select ... from ...where name = ... &#x5E38;&#x89C1;&#x4E8E;&#x552F;&#x4E00;&#x7D22;&#x5F15; &#x548C;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x3002;

alter table teacherCard add constraint pk_tcid primary key(tcid);
alter table teacher add constraint uk_tcid unique index(tcid) ;
explain select t.tcid from teacher t,teacherCard tc where t.tcid = tc.tcid;
# &#x4EE5;&#x4E0A;SQL&#xFF0C;&#x7528;&#x5230;&#x7684;&#x7D22;&#x5F15;&#x662F; t.tcid,&#x5373;teacher&#x8868;&#x4E2D;&#x7684;tcid&#x5B57;&#x6BB5;&#xFF1B;
# &#x5982;&#x679C;teacher&#x8868;&#x7684;&#x6570;&#x636E;&#x4E2A;&#x6570; &#x548C; &#x8FDE;&#x63A5;&#x67E5;&#x8BE2;&#x7684;&#x6570;&#x636E;&#x4E2A;&#x6570;&#x4E00;&#x81F4;&#xFF08;&#x90FD;&#x662F;3&#x6761;&#x6570;&#x636E;&#xFF09;&#xFF0C;&#x5219;&#x6709;&#x53EF;&#x80FD;&#x6EE1;&#x8DB3;eq_ref&#x7EA7;&#x522B;&#xFF1B;&#x5426;&#x5219;&#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;&#x3002;

-- **************************  ref  **************************
-- ref&#xFF1A;&#x975E;&#x552F;&#x4E00;&#x6027;&#x7D22;&#x5F15;&#xFF0C;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x7D22;&#x5F15;&#x952E;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x8FD4;&#x56DE;&#x5339;&#x914D;&#x7684;&#x6240;&#x6709;&#x884C;&#xFF08;0&#xFF0C;&#x591A;&#xFF09;
# &#x51C6;&#x5907;&#x6570;&#x636E;&#xFF1A;
insert into teacher values(4,&apos;zs&apos;,4) ;
insert into teacherCard values(4,&apos;tz222&apos;);

# &#x6D4B;&#x8BD5;&#xFF1A;
alter table teacher add index index_name (tname) ;
explain select * from teacher where tname = &apos;tz&apos;;

-- **************************  range  **************************
-- range&#xFF1A;&#x68C0;&#x7D22;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x7684;&#x884C; ,where&#x540E;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x67E5;&#x8BE2;(between  ,&gt; &lt; &gt;=,  &#x7279;&#x6B8A;:in&#x6709;&#x65F6;&#x5019;&#x4F1A;&#x5931;&#x6548; &#xFF0C;&#x4ECE;&#x800C;&#x8F6C;&#x4E3A; &#x65E0;&#x7D22;&#x5F15;all)
alter table teacher add index tid_index (tid) ;
explain select t.* from teacher t where t.tid in (1,2) ;
explain select t.* from teacher t where t.tid &lt;3 ;

-- **************************  index  **************************
-- index&#xFF1A;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x7D22;&#x5F15;&#x4E2D;&#x6570;&#x636E;
explain select tid from teacher ; -- tid &#x662F;&#x7D22;&#x5F15;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x626B;&#x63CF;&#x7D22;&#x5F15;&#x8868;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x6240;&#x6709;&#x8868;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;

-- **************************  all  **************************
-- all&#xFF1A;&#x67E5;&#x8BE2;&#x5168;&#x90E8;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;
explain select cid from course ;  -- cid&#x4E0D;&#x662F;&#x7D22;&#x5F15;&#xFF0C;&#x9700;&#x8981;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x5373;&#x9700;&#x8981;&#x6240;&#x6709;&#x8868;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;


-- **&#x5C0F;&#x7ED3;&#xFF1A;**
-- system/const: &#x7ED3;&#x679C;&#x53EA;&#x6709;&#x4E00;&#x6761;&#x6570;&#x636E;
-- eq_ref:&#x7ED3;&#x679C;&#x591A;&#x6761;&#xFF1B;&#x4F46;&#x662F;(&#x7D22;&#x5F15;&#x5BF9;&#x5E94;&#x7684;)&#x6BCF;&#x6761;&#x6570;&#x636E;&#x662F;&#x552F;&#x4E00;&#x7684; &#xFF1B;
-- ref&#xFF1A;&#x7ED3;&#x679C;&#x591A;&#x6761;&#xFF1B;&#x4F46;&#x662F;(&#x7D22;&#x5F15;&#x5BF9;&#x5E94;&#x7684;)&#x6BCF;&#x6761;&#x6570;&#x636E;&#x662F;&#x662F;0&#x6216;&#x591A;&#x6761; &#xFF1B;
</code></pre>
<h3 id="-possiblekeys">@  possible_keys</h3>
<p>&#x200B;      &#x53EF;&#x80FD;&#x7528;&#x5230;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x9884;&#x6D4B;&#xFF0C;&#x4E0D;&#x51C6;&#x3002;<br>&#x200B;      &#x5982;&#x679C; possible_key/key&#x662F;NULL&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x6CA1;&#x7528;&#x7D22;&#x5F15;   </p>
<pre><code class="lang-mysql">alter table course add index cname_index (cname);
explain select t.tname ,tc.tcdesc from teacher t,teacherCard tc 
where t.tcid= tc.tcid and t.tid = (select c.tid from course c where cname = &apos;sql&apos;) ;

explain select tc.tcdesc from teacherCard tc,course c,teacher t 
where c.tid = t.tid and t.tcid = tc.tcid and c.cname = &apos;sql&apos; ;
</code></pre>
<h3 id="-key">@  key</h3>
<p>&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x7D22;&#x5F15;  </p>
<h3 id="-keylen">@  key_len</h3>
<p>&#x7D22;&#x5F15;&#x7684;&#x957F;&#x5EA6;,&#x5355;&#x4F4D;&#x5B57;&#x8282;<br>&#x4F5C;&#x7528;&#xFF1A;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x590D;&#x5408;&#x7D22;&#x5F15;&#x662F;&#x5426;&#x88AB;&#x5B8C;&#x5168;&#x4F7F;&#x7528;  &#xFF08;a,b,c&#xFF09;<br>key_len&#x662F;&#x7D22;&#x5F15;&#x5217;&#x7C7B;&#x578B;&#x7684;&#x5B57;&#x8282;&#x957F;&#x5EA6;&#x3002;int--4byte&#xFF0C; bigint--8byte&#xFF0C;char(30)-&#x5982;&#x679C;&#x662F;utf8&#x7F16;&#x7801;&#xFF0C;&#x5219;&#x4E3A;3*30=90byte&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x5217;&#x5141;&#x8BB8;&#x4E3A;NULL&#x5219;&#x518D;&#x589E;&#x52A0;1byte&#x6807;&#x8BC6;&#xFF0C;&#x5982;&#x679C;&#x662F;varchar&#x7C7B;&#x578B;&#xFF0C;&#x5219;&#x518D;&#x589E;&#x52A0;2byte&#x6807;&#x8BC6;&#x53D8;&#x957F;&#x3002;</p>
<pre><code class="lang-mysql">create table test_kl
 (
   id int(3),
   name char(20) not null default &apos;&apos;
 );

 insert into test_kl values(1, &apos;aaa&apos;);
 insert into test_kl values(2, &apos;bbb&apos;);

 -- &#x6D4B;&#x8BD5;1&#xFF1A; key_len=60 &#x5728;utf8&#xFF1A;1&#x4E2A;&#x5B57;&#x7B26;&#x7AD9;3&#x4E2A;&#x5B57;&#x8282;
 alter table test_kl add index index_name(name) ;
 explain select * from test_kl where name =&apos;&apos; ;     

 -- &#x6D4B;&#x8BD5;2&#xFF1A;key_len=61, -- &#x5982;&#x679C;&#x7D22;&#x5F15;&#x5B57;&#x6BB5;&#x53EF;&#x4EE5;&#x4E3A;Null,&#x5219;&#x4F1A;&#x4F7F;&#x7528;1&#x4E2A;&#x5B57;&#x8282;&#x7528;&#x4E8E;&#x6807;&#x8BC6;&#x3002;
 alter table test_kl add column name1 char(20) ;  -- name1&#x53EF;&#x4EE5;&#x4E3A;null
 alter table test_kl add index index_name1(name1) ;
 explain select * from test_kl where name1 =&apos;&apos; ;   

 -- &#x5220;&#x9664;&#x5F53;&#x524D;&#x7D22;&#x5F15;
 show index from test_kl ;
 drop index index_name on test_kl ;
 drop index index_name1 on test_kl ;

 -- &#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x590D;&#x5408;&#x7D22;&#x5F15; 
 alter table test_kl add index name_name1_index (name,name1) ; 

 -- &#x6D4B;&#x8BD5;3&#xFF1A;
 -- &#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF1A;&#x4E00;&#x7EA7;&#x4E00;&#x7EA7;&#x7684;&#x67E5;&#x627E;&#xFF0C;&#x6839;&#x636E;name&#x67E5;&#x627E;&#xFF0C;&#x5982;&#x679C;&#x7ED3;&#x679C;&#x4E2D;&#x6CA1;&#x6709;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x4E0D;&#x7528; name1&#x4E86;&#xFF1B;
 -- &#x5982;&#x679C;name&#x67E5;&#x627E;&#x7684;&#x7ED3;&#x679C;&#x4E0D;&#x552F;&#x4E00;&#xFF0C;&#x5219;&#x7EE7;&#x7EED;&#x7528;name1&#x67E5;&#x627E;&#xFF0C;
 -- &#x8DE8;&#x5217;&#x67E5;&#x627E;&#x4F1A;&#x4F7F;&#x590D;&#x5408;&#x7D22;&#x5F15;&#x5931;&#x6548;&#x3002;

 explain select * from test_kl where name=&apos;a&apos; and name1 = &apos;&apos; ; -- 121
 explain select * from test_kl where name = &apos;&apos; ; -- 60

 -- &#x6D4B;&#x8BD5;4&#xFF1A;-- 20*3=60 +  1(null)  +2(&#x7528;2&#x4E2A;&#x5B57;&#x8282; &#x6807;&#x8BC6;&#x53EF;&#x53D8;&#x957F;&#x5EA6;)  =63
 alter table test_kl add column name2 varchar(20) ; -- name2&#x53EF;&#x4EE5;&#x4E3A;Null 
 alter table test_kl add index name2_index (name2) ;
 explain select * from test_kl where name2 = &apos;&apos; ;  -- 63

 # utf8:1&#x4E2A;&#x5B57;&#x7B26;3&#x4E2A;&#x5B57;&#x8282;
 # gbk:1&#x4E2A;&#x5B57;&#x7B26;2&#x4E2A;&#x5B57;&#x8282;
 # latin:1&#x4E2A;&#x5B57;&#x7B26;1&#x4E2A;&#x5B57;&#x8282;
</code></pre>
<h3 id="-ref">@  ref</h3>
<p>&#x6CE8;&#x610F;&#x4E0E;type&#x4E2D;&#x7684;ref&#x503C;&#x533A;&#x5206;&#x3002;<br>&#x4F5C;&#x7528;&#xFF1A; &#x6307;&#x660E;&#x5F53;&#x524D;&#x8868;&#x6240; &#x53C2;&#x7167;&#x7684; &#x5B57;&#x6BB5;&#x3002;  </p>
<pre><code class="lang-mysql">select ... where a.c = b.x ;  # &#x5176;&#x4E2D;b.x&#x53EF;&#x4EE5;&#x662F;&#x5E38;&#x91CF;&#xFF0C;const
alter table course  add index tid_index (tid) ;
explain select * from course c,teacher t where c.tid = t.tid  and t.tname =&apos;tw&apos; ;
</code></pre>
<h3 id="-rows">@  rows</h3>
<p>&#x88AB;&#x7D22;&#x5F15;&#x4F18;&#x5316;&#x67E5;&#x8BE2;&#x7684; &#x6570;&#x636E;&#x4E2A;&#x6570; (&#x5B9E;&#x9645;&#x901A;&#x8FC7;&#x7D22;&#x5F15;&#x800C;&#x67E5;&#x8BE2;&#x5230;&#x7684; &#x6570;&#x636E;&#x4E2A;&#x6570;)  </p>
<pre><code class="lang-mysql">explain select * from course c,teacher t  where c.tid = t.tid and t.tname = &apos;tz&apos; ;
</code></pre>
<h3 id="-extra">@  Extra</h3>
<ul>
<li><strong>using filesort &#xFF1A;</strong> &#x6027;&#x80FD;&#x6D88;&#x8017;&#x5927;&#xFF1B;&#x9700;&#x8981;&#x201C;&#x989D;&#x5916;&#x201D;&#x7684;&#x4E00;&#x6B21;&#x6392;&#x5E8F;&#xFF08;&#x67E5;&#x8BE2;&#xFF09;  &#x3002;&#x5E38;&#x89C1;&#x4E8E; order by &#x8BED;&#x53E5;&#x4E2D;&#x3002;  </li>
<li><strong>using temporary</strong>: &#x6027;&#x80FD;&#x635F;&#x8017;&#x5927; &#xFF0C;&#x7528;&#x5230;&#x4E86;&#x4E34;&#x65F6;&#x8868;&#x3002;&#x4E00;&#x822C;&#x51FA;&#x73B0;&#x5728;group by &#x8BED;&#x53E5;&#x4E2D;&#x3002;  </li>
<li><strong>using index</strong>: &#x6027;&#x80FD;&#x63D0;&#x5347;; &#x7D22;&#x5F15;&#x8986;&#x76D6;&#xFF08;&#x8986;&#x76D6;&#x7D22;&#x5F15;&#xFF09;&#x3002;  </li>
<li><strong>using where</strong>: &#x9700;&#x8981;&#x56DE;&#x8868;&#x67E5;&#x8BE2;  </li>
<li><strong>impossible where</strong>: where&#x5B50;&#x53E5;&#x6C38;&#x8FDC;&#x4E3A;false</li>
</ul>
<pre><code class="lang-mysql">-- **************************  using filesort  **************************
-- using filesort: &#x6027;&#x80FD;&#x6D88;&#x8017;&#x5927;&#xFF1B;&#x9700;&#x8981;&#x201C;&#x989D;&#x5916;&#x201D;&#x7684;&#x4E00;&#x6B21;&#x6392;&#x5E8F;&#xFF08;&#x67E5;&#x8BE2;&#xFF09;  &#x3002;&#x5E38;&#x89C1;&#x4E8E; order by &#x8BED;&#x53E5;&#x4E2D;&#x3002;
 # &#x6392;&#x5E8F;&#xFF1A;&#x5148;&#x67E5;&#x8BE2;
 # 10&#x4E2A;&#x4EBA; &#x6839;&#x636E;&#x5E74;&#x9F84;&#x6392;&#x5E8F;&#x3002;
 # a1:&#x59D3;&#x540D; a2:&#x5E74;&#x9F84;
 create table test02
 (
     a1 char(3),
     a2 char(3),
     a3 char(3),
     index idx_a1(a1),
     index idx_a2(a2),
     index idx_a3(a3)
 );

 insert into test02 values(&apos;a&apos;, &apos;10&apos;, &apos;aaa&apos;);
 insert into test02 values(&apos;b&apos;, &apos;20&apos;, &apos;bbb&apos;);
 insert into test02 values(&apos;b&apos;, &apos;22&apos;, &apos;bbb2&apos;);
 insert into test02 values(&apos;c&apos;, &apos;15&apos;, &apos;ccc&apos;);

 -- using where
 explain select * from test02 where a1 =&apos;b&apos; order by a1 ;  

 -- using where, using filesort
 explain select * from test02 where a1 = &apos;b&apos; order by a2 ; 

 -- &#x5C0F;&#x7ED3;&#xFF1A;
 -- &#x5BF9;&#x4E8E;&#x5355;&#x7D22;&#x5F15;&#xFF0C; &#x5982;&#x679C;&#x6392;&#x5E8F;&#x548C;&#x67E5;&#x627E;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x5219;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;using filesort&#xFF1B;
 -- &#x5982;&#x679C;&#x6392;&#x5E8F;&#x548C;&#x67E5;&#x627E;&#x4E0D;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x5219;&#x4F1A;&#x51FA;&#x73B0;using filesort&#xFF1B;

 -- &#x907F;&#x514D;&#xFF1A; 
 -- where&#x54EA;&#x4E9B;&#x5B57;&#x6BB5;&#xFF0C;&#x5C31;order by&#x90A3;&#x4E9B;&#x5B57;&#x6BB5;2

 -- &#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF1A;&#x4E0D;&#x80FD;&#x8DE8;&#x5217;&#xFF08;&#x6700;&#x4F73;&#x5DE6;&#x524D;&#x7F00;&#xFF09;
 drop index idx_a1 on test02;
 drop index idx_a2 on test02;
 drop index idx_a3 on test02;
 alter table test02 add index idx_a1a2a3 (a1,a2,a3) ;

 explain select * from test02 where a1=&apos;b&apos; order by a3;  -- using filesort
 explain select * from test02 where a2=&apos;b&apos; order by a3;  -- using filesort
 explain select * from test02 where a1=&apos;b&apos; order by a2;
 explain select *from test02 where a2=&apos;&apos; order by a1 ;  -- using filesort

 -- &#x5C0F;&#x7ED3;&#xFF1A;&#x907F;&#x514D;&#xFF1A; where&#x548C;order by &#x6309;&#x7167;&#x590D;&#x5408;&#x7D22;&#x5F15;&#x7684;&#x987A;&#x5E8F;&#x4F7F;&#x7528;&#xFF0C;&#x4E0D;&#x8981;&#x8DE8;&#x5217;&#x6216;&#x65E0;&#x5E8F;&#x4F7F;&#x7528;&#x3002;

-- **************************  using temporary  **************************
-- using temporary: &#x6027;&#x80FD;&#x635F;&#x8017;&#x5927; &#xFF0C;&#x7528;&#x5230;&#x4E86;&#x4E34;&#x65F6;&#x8868;&#x3002;&#x4E00;&#x822C;&#x51FA;&#x73B0;&#x5728;group by &#x8BED;&#x53E5;&#x4E2D;&#x3002;

 explain select a1 from test02 where a1 in (&apos;a&apos;,&apos;b&apos;) group by a1 ;
 explain select a1 from test02 where a1 in (&apos;a&apos;,&apos;b&apos;) group by a2 ; --using temporary
 -- &#x907F;&#x514D;&#xFF1A;&#x67E5;&#x8BE2;&#x90A3;&#x4E9B;&#x5217;&#xFF0C;&#x5C31;&#x6839;&#x636E;&#x90A3;&#x4E9B;&#x5217; group by

-- **************************  using index  **************************
-- using index: &#x6027;&#x80FD;&#x63D0;&#x5347;; &#x7D22;&#x5F15;&#x8986;&#x76D6;&#xFF08;&#x8986;&#x76D6;&#x7D22;&#x5F15;&#xFF09;&#x3002;  
-- &#x539F;&#x56E0;&#xFF1A;&#x4E0D;&#x8BFB;&#x53D6;&#x539F;&#x6587;&#x4EF6;&#xFF0C;&#x53EA;&#x4ECE;&#x7D22;&#x5F15;&#x6587;&#x4EF6;&#x4E2D;&#x83B7;&#x53D6;&#x6570;&#x636E; &#xFF08;&#x4E0D;&#x9700;&#x8981;&#x56DE;&#x8868;&#x67E5;&#x8BE2;&#xFF09;
-- &#x53EA;&#x8981;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x5217; &#x5168;&#x90E8;&#x90FD;&#x5728;&#x7D22;&#x5F15;&#x4E2D;&#xFF0C;&#x5C31;&#x662F;&#x7D22;&#x5F15;&#x8986;&#x76D6;using index  

 -- &#x4F8B;&#x5982;&#xFF1A;test02&#x8868;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x590D;&#x5408;&#x7D22;&#x5F15;(a1,a2,a3)
 explain select a1,a2 from test02 where a1=&apos;a&apos; or a2= &apos;&apos; ; --using index   

 drop index idx_a1_a2_a3 on test02;

 alter table test02 add index idx_a1_a2(a1,a2) ;
 explain select a1,a3 from test02 where a1=&apos;a&apos; or a3= &apos;&apos; ;

 -- &#x5982;&#x679C;&#x7528;&#x5230;&#x4E86;&#x7D22;&#x5F15;&#x8986;&#x76D6;(using index&#x65F6;)&#xFF0C;&#x4F1A;&#x5BF9; possible_keys&#x548C;key&#x9020;&#x6210;&#x5F71;&#x54CD;&#xFF1A;
 -- a.&#x5982;&#x679C;&#x6CA1;&#x6709;where&#xFF0C;&#x5219;&#x7D22;&#x5F15;&#x53EA;&#x51FA;&#x73B0;&#x5728;key&#x4E2D;&#xFF1B;
 -- b.&#x5982;&#x679C;&#x6709;where&#xFF0C;&#x5219;&#x7D22;&#x5F15;&#x51FA;&#x73B0;&#x5728;key&#x548C;possible_keys&#x4E2D;&#x3002;

 explain select a1,a2 from test02 where a1=&apos;a&apos; or a2= &apos;&apos; ;
 explain select a1,a2 from test02  ;

-- *************************  using where  **************************
-- using where: &#x9700;&#x8981;&#x56DE;&#x8868;&#x67E5;&#x8BE2;
 # &#x5047;&#x8BBE;age&#x662F;&#x7D22;&#x5F15;&#x5217;
 # &#x4F46;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;select age,name from ...where age =...,&#x6B64;&#x8BED;&#x53E5;&#x4E2D;&#x5FC5;&#x987B;&#x56DE;&#x539F;&#x8868;&#x67E5;Name&#xFF0C;&#x56E0;&#x6B64;&#x4F1A;&#x663E;&#x793A;using where.
 explain select a1,a3 from test02 where a3 = &apos;&apos; ; -- a3&#x9700;&#x8981;&#x56DE;&#x539F;&#x8868;&#x67E5;&#x8BE2;=

-- **************************  impossible where  **************************
-- impossible where: where&#x5B50;&#x53E5;&#x6C38;&#x8FDC;&#x4E3A;false
 explain select * from test02 where a1=&apos;x&apos; and a1=&apos;y&apos;  ;
</code></pre>
<h1 id="&#x4F18;&#x5316;&#x6848;&#x4F8B;">&#x4F18;&#x5316;&#x6848;&#x4F8B;</h1>
<h2 id="&#x5355;&#x8868;&#x4F18;&#x5316;">&#x5355;&#x8868;&#x4F18;&#x5316;</h2>
<pre><code class="lang-mysql"># &#x51C6;&#x5907;&#x6570;&#x636E;
create table book
(
    bid int(4) primary key,
    name varchar(20) not null,
    authorid int(4) not null,
    publicid int(4) not null,
    typeid int(4) not null 
);

insert into book values(1,&apos;tjava&apos;,1,1,2) ;
insert into book values(2,&apos;tc&apos;,2,1,2) ;
insert into book values(3,&apos;wx&apos;,3,2,1) ;
insert into book values(4,&apos;math&apos;,4,2,3) ;    
commit;    

# &#x6848;&#x4F8B;&#xFF1A;&#x67E5;&#x8BE2;authorid=1&#x4E14;typeid&#x4E3A;2&#x6216;3&#x7684;bid
explain select bid from book where typeid in(2,3) and authorid=1  order by typeid desc ;

(a,b,c)
(a,b)

# &#x4F18;&#x5316;&#xFF1A;&#x52A0;&#x7D22;&#x5F15;
alter table book add index idx_bta (bid,typeid,authorid);

# &#x7D22;&#x5F15;&#x4E00;&#x65E6;&#x8FDB;&#x884C;&#x5347;&#x7EA7;&#x4F18;&#x5316;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x4E4B;&#x524D;&#x5E9F;&#x5F03;&#x7684;&#x7D22;&#x5F15;&#x5220;&#x6389;&#xFF0C;&#x9632;&#x6B62;&#x5E72;&#x6270;&#x3002;
drop index idx_bta on book;

# &#x6839;&#x636E;SQL&#x5B9E;&#x9645;&#x89E3;&#x6790;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x8C03;&#x6574;&#x7D22;&#x5F15;&#x7684;&#x987A;&#x5E8F;&#xFF1A;
alter table book add index idx_tab (typeid,authorid,bid); 
--&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x56DE;&#x8868;&#x67E5;&#x8BE2;bid&#xFF0C;&#x4F46;&#x662F;&#x5C06;bid&#x653E;&#x5230;&#x7D22;&#x5F15;&#x4E2D;&#x53EF;&#x4EE5;&#x63D0;&#x5347;&#x4F7F;&#x7528;using index ;

# &#x518D;&#x6B21;&#x4F18;&#x5316;&#xFF08;&#x4E4B;&#x524D;&#x662F;index&#x7EA7;&#x522B;&#xFF09;&#xFF1A;&#x601D;&#x8DEF;&#x3002;&#x56E0;&#x4E3A;&#x8303;&#x56F4;&#x67E5;&#x8BE2;in&#x6709;&#x65F6;&#x4F1A;&#x5931;&#x6548;&#xFF0C;&#x56E0;&#x6B64;&#x4EA4;&#x6362;&#x7D22;&#x5F15;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x5C06;typeid in(2,3) &#x653E;&#x5230;&#x6700;&#x540E;&#x3002;
drop index idx_tab on book;
alter table book add index idx_atb (authorid,typeid,bid);
explain select bid from book where  authorid=1 and  typeid in(2,3) order by typeid desc ;

-- &#x5C0F;&#x7ED3;&#xFF1A;    
-- a.&#x6700;&#x4F73;&#x505A;&#x524D;&#x7F00;&#xFF0C;&#x4FDD;&#x6301;&#x7D22;&#x5F15;&#x7684;&#x5B9A;&#x4E49;&#x548C;&#x4F7F;&#x7528;&#x7684;&#x987A;&#x5E8F;&#x4E00;&#x81F4;&#x6027;  
-- b.&#x7D22;&#x5F15;&#x9700;&#x8981;&#x9010;&#x6B65;&#x4F18;&#x5316;  
-- c.&#x5C06;&#x542B;In&#x7684;&#x8303;&#x56F4;&#x67E5;&#x8BE2; &#x653E;&#x5230;where&#x6761;&#x4EF6;&#x7684;&#x6700;&#x540E;&#xFF0C;&#x9632;&#x6B62;&#x5931;&#x6548;&#x3002;

/*
&#x672C;&#x4F8B;&#x4E2D;&#x540C;&#x65F6;&#x51FA;&#x73B0;&#x4E86;Using where&#xFF08;&#x9700;&#x8981;&#x56DE;&#x539F;&#x8868;&#xFF09;; Using index&#xFF08;&#x4E0D;&#x9700;&#x8981;&#x56DE;&#x539F;&#x8868;&#xFF09;&#xFF1A;
&#x539F;&#x56E0;&#xFF0C;where  authorid=1 and  typeid in(2,3)&#x4E2D;authorid&#x5728;&#x7D22;&#x5F15;(authorid,typeid,bid)&#x4E2D;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x9700;&#x8981;&#x56DE;&#x539F;&#x8868;&#xFF08;&#x76F4;&#x63A5;&#x5728;&#x7D22;&#x5F15;&#x8868;&#x4E2D;&#x80FD;&#x67E5;&#x5230;&#xFF09;&#xFF1B;
&#x800C;typeid&#x867D;&#x7136;&#x4E5F;&#x5728;&#x7D22;&#x5F15;(authorid,typeid,bid)&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x542B;in&#x7684;&#x8303;&#x56F4;&#x67E5;&#x8BE2;&#x5DF2;&#x7ECF;&#x4F7F;&#x8BE5;typeid&#x7D22;&#x5F15;&#x5931;&#x6548;&#xFF0C;&#x56E0;&#x6B64;&#x76F8;&#x5F53;&#x4E8E;&#x6CA1;&#x6709;typeid&#x8FD9;&#x4E2A;&#x7D22;&#x5F15;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x56DE;&#x539F;&#x8868;&#xFF08;using where&#xFF09;&#xFF1B;
*/
-- &#x4F8B;&#x5982;&#x4EE5;&#x4E0B;&#x6CA1;&#x6709;&#x4E86;In&#xFF0C;&#x5219;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;using where
explain select bid from book where  authorid=1 and  typeid =3 order by typeid desc ;

-- &#x8FD8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;key_len&#x8BC1;&#x660E;In&#x53EF;&#x4EE5;&#x4F7F;&#x7D22;&#x5F15;&#x5931;&#x6548;&#x3002;
</code></pre>
<h2 id="&#x4E24;&#x8868;&#x4F18;&#x5316;">&#x4E24;&#x8868;&#x4F18;&#x5316;</h2>
<pre><code class="lang-mysql"># &#x51C6;&#x5907;&#x6570;&#x636E;
create table teacher2
(
    tid int(4) primary key,
    cid int(4) not null
);

create table course2
(
    cid int(4) ,
    cname varchar(20)
);

insert into teacher2 values(1,2);
insert into teacher2 values(2,1);
insert into teacher2 values(3,3);

insert into course2 values(1,&apos;java&apos;);
insert into course2 values(2,&apos;python&apos;);
insert into course2 values(3,&apos;kotlin&apos;);
commit;

-- &#x5DE6;&#x8FDE;&#x63A5;&#xFF1A;
explain select * from teacher2 t left outer join course2 c
on t.cid=c.cid where c.cname=&apos;java&apos;;

-- &#x7D22;&#x5F15;&#x5F80;&#x54EA;&#x5F20;&#x8868;&#x52A0;&#xFF1F;
-- &#x5C0F;&#x8868;&#x9A71;&#x52A8;&#x5927;&#x8868;  
-- &#x7D22;&#x5F15;&#x5EFA;&#x7ACB;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#x5B57;&#x6BB5;&#x4E0A; &#xFF08;&#x672C;&#x9898; t.cid=c.cid&#x53EF;&#x77E5;&#xFF0C;t.cid&#x5B57;&#x6BB5;&#x4F7F;&#x7528;&#x9891;&#x7E41;&#xFF0C;&#x56E0;&#x6B64;&#x7ED9;&#x8BE5;&#x5B57;&#x6BB5;&#x52A0;&#x7D22;&#x5F15;&#xFF09; 
-- &#x4E00;&#x822C;&#x60C5;&#x51B5;&#x5BF9;&#x4E8E;&#x5DE6;&#x5916;&#x8FDE;&#x63A5;&#xFF0C;&#x7ED9;&#x5DE6;&#x8868;&#x52A0;&#x7D22;&#x5F15;&#xFF1B;&#x53F3;&#x5916;&#x8FDE;&#x63A5;&#xFF0C;&#x7ED9;&#x53F3;&#x8868;&#x52A0;&#x7D22;&#x5F15;

/*
  &#x5982;&#x4F55;&#x7406;&#x89E3;&#x5C0F;&#x8868;&#x9A71;&#x52A8;&#x5927;&#x8868;&#xFF1F;

  &#x5C0F;&#x8868;&#xFF1A;10&#x6761;&#x8BB0;&#x5F55;
  &#x5927;&#x8868;&#xFF1A;300&#x6761;&#x8BB0;&#x5F55;
  where &#x5C0F;&#x8868;(10).x = &#x5927;&#x8868;(300).y ;  -&gt; &#x5FAA;&#x73AF;&#x4E86;10&#x6B21;
  where &#x5927;&#x8868;(300).y = &#x5C0F;&#x8868;(10).x ;  -&gt; &#x5FAA;&#x73AF;&#x4E86;300&#x6B21;

  &#x5C0F;&#x8868;&#xFF1A;10&#x6761;&#x8BB0;&#x5F55;
  &#x5927;&#x8868;&#xFF1A;300&#x6761;&#x8BB0;&#x5F55;

  select ... where &#x5C0F;&#x8868;(10).x=&#x5927;&#x8868;(300).x ;
  for(int i=0;i&lt;&#x5C0F;&#x8868;.length10;i++)
  {
      for(int j=0;j&lt;&#x5927;&#x8868;.length300;j++)
      {
          ...
      }
  }

  select ...where &#x5927;&#x8868;.x300=&#x5C0F;&#x8868;.x10 ;
  for(int i=0;i&lt;&#x5927;&#x8868;.length300;i++)
  {
      for(int j=0;j&lt;&#x5C0F;&#x8868;.length10;j++)
      {
          ...
      }
  }

  -- &#x4EE5;&#x4E0A;2&#x4E2A;FOR&#x5FAA;&#x73AF;&#xFF0C;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x5FAA;&#x73AF;3000&#x6B21;&#xFF1B;&#x4F46;&#x662F; &#x5BF9;&#x4E8E;&#x53CC;&#x5C42;&#x5FAA;&#x73AF;&#x6765;&#x8BF4;&#xFF1A;&#x4E00;&#x822C;&#x5EFA;&#x8BAE;&#x5C06;&#x6570;&#x636E;&#x5C0F;&#x7684;&#x5FAA;&#x73AF;&#x653E;&#x5916;&#x5C42;&#xFF1B;&#x6570;&#x636E;&#x5927;&#x7684;&#x5FAA;&#x73AF;&#x653E;&#x5185;&#x5B58;&#x3002;
  -- &#x5C06;&#x5FAA;&#x73AF;&#x6B21;&#x6570;&#x591A;&#x7684;&#x5FAA;&#x73AF;&#x653E;&#x5728;&#x5185;&#x4FA7;&#xFF0C;&#x5FAA;&#x73AF;&#x6B21;&#x6570;&#x5C11;&#x7684;&#x5FAA;&#x73AF;&#x653E;&#x5728;&#x5916;&#x4FA7;&#xFF0C;&#x51CF;&#x5C11;&#x4E86;&#x5185;&#x5916;&#x5FAA;&#x73AF;&#x5207;&#x6362;&#x6B21;&#x6570;&#xFF0C;&#x5176;&#x6027;&#x80FD;&#x4F1A;&#x63D0;&#x9AD8;&#x3002;&#xFF08;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x7684;&#x4E00;&#x4E2A;&#x4F18;&#x5316;&#x539F;&#x5219;&#xFF09;
*/

-- &#x7ED3;&#x8BBA;&#xFF1A;&#x5F53;&#x7F16;&#x5199; ..on t.cid=c.cid &#x65F6;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x91CF;&#x5C0F;&#x7684;&#x8868;&#x653E;&#x5DE6;&#x8FB9;&#xFF08;&#x5047;&#x8BBE;&#x6B64;&#x65F6;t&#x8868;&#x6570;&#x636E;&#x91CF;&#x5C0F;&#xFF09;

alter table teacher2 add index index_teacher2_cid(cid) ;
alter table course2 add index index_course2_cname(cname);

-- Using join buffer:extra&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x9009;&#x9879;&#xFF0C;&#x4F5C;&#x7528;&#xFF1A;Mysql&#x5F15;&#x64CE;&#x4F7F;&#x7528;&#x4E86;&#x8FDE;&#x63A5;&#x7F13;&#x5B58;&#x3002;
</code></pre>
<h2 id="&#x4E09;&#x8868;&#x4F18;&#x5316;">&#x4E09;&#x8868;&#x4F18;&#x5316;</h2>
<ul>
<li>&#x57FA;&#x672C;&#x539F;&#x5219;&#xFF1A;  <ul>
<li>&#x5C0F;&#x8868;&#x9A71;&#x52A8;&#x5927;&#x8868;</li>
<li>&#x7D22;&#x5F15;&#x5EFA;&#x7ACB;&#x5728;&#x7ECF;&#x5E38;&#x67E5;&#x8BE2;&#x7684;&#x5B57;&#x6BB5;&#x4E0A;</li>
</ul>
</li>
</ul>
<h2 id="&#x5173;&#x4E8E;&#x7B26;&#x5408;&#x7D22;&#x5F15;&#x548C;&#x4E34;&#x65F6;&#x8868;">&#x5173;&#x4E8E;&#x7B26;&#x5408;&#x7D22;&#x5F15;&#x548C;&#x4E34;&#x65F6;&#x8868;</h2>
<pre><code class="lang-mysql"># &#x51C6;&#x5907;&#x6570;&#x636E;
create table test03
(
  a1 int(4) not null,
  a2 int(4) not null,
  a3 int(4) not null,
  a4 int(4) not null
);
alter table test03 add index idx_a1_a2_a3_4(a1,a2,a3,a4) ;

-- *********************************&#x5173;&#x4E8E;&#x590D;&#x5408;&#x7D22;&#x5F15;
-- &#x63A8;&#x8350;&#x5199;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A; &#x7D22;&#x5F15;&#x7684;&#x4F7F;&#x7528;&#x987A;&#x5E8F;&#xFF08;where&#x540E;&#x9762;&#x7684;&#x987A;&#x5E8F;&#xFF09; &#x548C; &#x590D;&#x5408;&#x7D22;&#x5F15;&#x7684;&#x987A;&#x5E8F;&#x4E00;&#x81F4;
explain select a1,a2,a3,a4 from test03 where a1=1 and a2=2 and a3=3 and a4 =4 ; 

-- &#x867D;&#x7136;&#x7F16;&#x5199;&#x7684;&#x987A;&#x5E8F;&#x548C;&#x7D22;&#x5F15;&#x987A;&#x5E8F;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x4F46;&#x662F; sql&#x5728;&#x771F;&#x6B63;&#x6267;&#x884C;&#x524D;&#x7ECF;&#x8FC7;&#x4E86;SQL&#x4F18;&#x5316;&#x5668;&#x7684;&#x8C03;&#x6574;&#xFF0C;&#x7ED3;&#x679C;&#x4E0E;&#x4E0A;&#x6761;SQL&#x662F;&#x4E00;&#x81F4;&#x7684;&#x3002;
explain select a1,a2,a3,a4 from test03 where a4=1 and a3=2 and a2=3 and a1 =4 ; 

-- &#x4EE5;&#x4E0A;2&#x4E2A;SQL&#xFF0C;&#x4F7F;&#x7528;&#x4E86;&#x5168;&#x90E8;&#x7684;&#x590D;&#x5408;&#x7D22;&#x5F15;

-- &#x4EE5;&#x4E0B;SQL&#x7528;&#x5230;&#x4E86;a1 a2&#x4E24;&#x4E2A;&#x7D22;&#x5F15;&#xFF0C;&#x8BE5;&#x4E24;&#x4E2A;&#x5B57;&#x6BB5;&#x4E0D;&#x9700;&#x8981;&#x56DE;&#x8868;&#x67E5;&#x8BE2;using index ;
-- &#x800C;a4&#x56E0;&#x4E3A;&#x8DE8;&#x5217;&#x4F7F;&#x7528;&#xFF0C;&#x9020;&#x6210;&#x4E86;&#x8BE5;&#x7D22;&#x5F15;&#x5931;&#x6548;&#xFF0C;&#x9700;&#x8981;&#x56DE;&#x8868;&#x67E5;&#x8BE2; &#x56E0;&#x6B64;&#x662F;using where&#xFF1B;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; key_len&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;
explain select a1,a2,a3,a4 from test03 where a1=1 and a2=2 and a4=4 order by a3; 


-- &#x4EE5;&#x4E0B;SQL&#x51FA;&#x73B0;&#x4E86; using filesort(&#x6587;&#x4EF6;&#x5185;&#x6392;&#x5E8F;&#xFF0C;&#x201C;&#x591A;&#x4E86;&#x4E00;&#x6B21;&#x989D;&#x5916;&#x7684;&#x67E5;&#x627E;/&#x6392;&#x5E8F;&#x201D;) &#xFF1A;
-- &#x4E0D;&#x8981;&#x8DE8;&#x5217;&#x4F7F;&#x7528;( where&#x548C;order by &#x62FC;&#x8D77;&#x6765;&#xFF0C;&#x4E0D;&#x8981;&#x8DE8;&#x5217;&#x4F7F;&#x7528;)
explain select a1,a2,a3,a4 from test03 where a1=1 and a4=4 order by a3; 

-- &#x4E0D;&#x4F1A;using filesort
explain select a1,a2,a3,a4 from test03 where a1=1 and a4=4 order by a2 , a3; 

-- &#x603B;&#x7ED3;&#xFF1A;
-- i.&#x5982;&#x679C;(a,b,c,d)&#x590D;&#x5408;&#x7D22;&#x5F15;&#x548C;&#x4F7F;&#x7528;&#x7684;&#x987A;&#x5E8F;&#x5168;&#x90E8;&#x4E00;&#x81F4;(&#x4E14;&#x4E0D;&#x8DE8;&#x5217;&#x4F7F;&#x7528;)&#xFF0C;&#x5219;&#x590D;&#x5408;&#x7D22;&#x5F15;&#x5168;&#x90E8;&#x4F7F;&#x7528;&#x3002;
-- &#x5982;&#x679C;&#x90E8;&#x5206;&#x4E00;&#x81F4;(&#x4E14;&#x4E0D;&#x8DE8;&#x5217;&#x4F7F;&#x7528;)&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x90E8;&#x5206;&#x7D22;&#x5F15;&#x3002;
select a,c where  a = and b= and d=
-- ii.where&#x548C;order by &#x62FC;&#x8D77;&#x6765;&#xFF0C;&#x4E0D;&#x8981;&#x8DE8;&#x5217;&#x4F7F;&#x7528; 


-- *********************************&#x5173;&#x4E8E;&#x989D;&#x5916;&#x8868;(temporary)
-- using temporary:&#x9700;&#x8981;&#x989D;&#x5916;&#x518D;&#x591A;&#x4F7F;&#x7528;&#x4E00;&#x5F20;&#x8868;&#x3002;&#x4E00;&#x822C;&#x51FA;&#x73B0;&#x5728;group by&#x8BED;&#x53E5;&#x4E2D;&#xFF1B;&#x5DF2;&#x7ECF;&#x6709;&#x8868;&#x4E86;&#xFF0C;&#x4F46;&#x4E0D;&#x9002;&#x7528;&#xFF0C;&#x5FC5;&#x987B;&#x518D;&#x6765;&#x4E00;&#x5F20;&#x8868;&#x3002;
-- &#x89E3;&#x6790;&#x8FC7;&#x7A0B;: from .. on.. join ..where ..group by ....having ...select dinstinct ..order by limit ...
a. explain select * from test03 where a2=2 and a4=4 group by a2,a4 ; -- &#x6CA1;&#x6709;using temporary
b. explain select * from test03 where a2=2 and a4=4 group by a3 ;
</code></pre>
<h1 id="&#x907F;&#x514D;&#x7D22;&#x5F15;&#x5931;&#x6548;&#x7684;&#x4E00;&#x4E9B;&#x539F;&#x5219;">&#x907F;&#x514D;&#x7D22;&#x5F15;&#x5931;&#x6548;&#x7684;&#x4E00;&#x4E9B;&#x539F;&#x5219;</h1>
<ol>
<li>&#x590D;&#x5408;&#x7D22;&#x5F15;<br>a. &#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF0C;&#x4E0D;&#x8981;&#x8DE8;&#x5217;&#x6216;&#x65E0;&#x5E8F;&#x4F7F;&#x7528;&#xFF08;&#x6700;&#x4F73;&#x5DE6;&#x524D;&#x7F00;&#xFF09;<br>b. &#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF0C;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x5168;&#x7D22;&#x5F15;&#x5339;&#x914D;  </li>
<li><p>&#x4E0D;&#x8981;&#x5728;&#x7D22;&#x5F15;&#x4E0A;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#xFF08;&#x8BA1;&#x7B97;&#x3001;&#x51FD;&#x6570;&#x3001;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#xFF09;&#xFF0C;&#x5426;&#x5219;&#x7D22;&#x5F15;&#x5931;&#x6548;  </p>
<pre><code class="lang-mysql">-- select ... where A.x = .. ; &#x5047;&#x8BBE;A.x&#x662F;&#x7D22;&#x5F15;
-- &#x4E0D;&#x8981;&#xFF1A;select ..where A.x*3 = .. ;
explain select * from book where authorid = 1 and typeid = 2 ;  -- &#x7528;&#x5230;&#x4E86;at2&#x4E2A;&#x7D22;&#x5F15;
explain select * from book where authorid = 1 and typeid*2 = 2 ; -- &#x7528;&#x5230;&#x4E86;a1&#x4E2A;&#x7D22;&#x5F15;
explain select * from book where authorid*2 = 1 and typeid*2 = 2 ; -- &#x7528;&#x5230;&#x4E86;0&#x4E2A;&#x7D22;&#x5F15;
explain select * from book where authorid*2 = 1 and typeid = 2 ; -- &#x7528;&#x5230;&#x4E86;0&#x4E2A;&#x7D22;&#x5F15;,
-- &#x539F;&#x56E0;&#xFF1A;&#x5BF9;&#x4E8E;&#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF0C;&#x5982;&#x679C;&#x5DE6;&#x8FB9;&#x5931;&#x6548;&#xFF0C;&#x53F3;&#x4FA7;&#x5168;&#x90E8;&#x5931;&#x6548;&#x3002;(a,b,c)&#xFF0C;&#x4F8B;&#x5982;&#x5982;&#x679C; b&#x5931;&#x6548;&#xFF0C;&#x5219;b c&#x540C;&#x65F6;&#x5931;&#x6548;&#x3002;

drop index idx_atb on book ; 
alter table book add index idx_authroid (authorid) ;
alter table book add index idx_typeid (typeid) ;
explain select * from book where authorid*2 = 1 and typeid = 2 ;
</code></pre>
</li>
<li><p>&#x590D;&#x5408;&#x7D22;&#x5F15;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x4E0D;&#x7B49;&#x4E8E;&#xFF08;!=  &lt;&gt;&#xFF09;&#x6216;is null (is not null)&#xFF0C;&#x5426;&#x5219;&#x81EA;&#x8EAB;&#x4EE5;&#x53CA;&#x53F3;&#x4FA7;&#x6240;&#x6709;&#x5168;&#x90E8;&#x5931;&#x6548;&#x3002;  </p>
<pre><code class="lang-mysql">-- &#x590D;&#x5408;&#x7D22;&#x5F15;&#x4E2D;&#x5982;&#x679C;&#x6709;&gt;&#xFF0C;&#x5219;&#x81EA;&#x8EAB;&#x548C;&#x53F3;&#x4FA7;&#x7D22;&#x5F15;&#x5168;&#x90E8;&#x5931;&#x6548;&#x3002;
explain select * from book where authorid = 1 and typeid =2 ;

-- SQL&#x4F18;&#x5316;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x6982;&#x7387;&#x5C42;&#x9762;&#x7684;&#x4F18;&#x5316;&#x3002;&#x81F3;&#x4E8E;&#x662F;&#x5426;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x4E86;&#x6211;&#x4EEC;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x9700;&#x8981;&#x901A;&#x8FC7;explain&#x8FDB;&#x884C;&#x63A8;&#x6D4B;&#x3002;
explain select * from book where authorid != 1 and typeid =2 ;
explain select * from book where authorid != 1 and typeid !=2 ;

-- &#x4F53;&#x9A8C;&#x6982;&#x7387;&#x60C5;&#x51B5;(&lt; &gt; =)&#xFF1A;&#x539F;&#x56E0;&#x662F;&#x670D;&#x52A1;&#x5C42;&#x4E2D;&#x6709;SQL&#x4F18;&#x5316;&#x5668;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5F71;&#x54CD;&#x6211;&#x4EEC;&#x7684;&#x4F18;&#x5316;&#x3002;
drop index idx_typeid on book;
drop index idx_authroid on book;
alter table book add index idx_book_at (authorid,typeid);
explain select * from book where authorid = 1 and typeid =2 ; -- &#x590D;&#x5408;&#x7D22;&#x5F15;at&#x5168;&#x90E8;&#x4F7F;&#x7528;
explain select * from book where authorid &gt; 1 and typeid =2 ; -- &#x590D;&#x5408;&#x7D22;&#x5F15;&#x4E2D;&#x5982;&#x679C;&#x6709;&gt;&#xFF0C;&#x5219;&#x81EA;&#x8EAB;&#x548C;&#x53F3;&#x4FA7;&#x7D22;&#x5F15;&#x5168;&#x90E8;&#x5931;&#x6548;&#x3002;
explain select * from book where authorid = 1 and typeid &gt;2 ; -- &#x590D;&#x5408;&#x7D22;&#x5F15;at&#x5168;&#x90E8;&#x4F7F;&#x7528;
-- &#x660E;&#x663E;&#x7684;&#x6982;&#x7387;&#x95EE;&#x9898;
explain select * from book where authorid &lt; 1 and typeid =2 ; -- &#x590D;&#x5408;&#x7D22;&#x5F15;at&#x53EA;&#x7528;&#x5230;&#x4E86;1&#x4E2A;&#x7D22;&#x5F15;
explain select * from book where authorid &lt; 4 and typeid =2 ; -- &#x590D;&#x5408;&#x7D22;&#x5F15;&#x5168;&#x90E8;&#x5931;&#x6548;

-- &#x6211;&#x4EEC;&#x5B66;&#x4E60;&#x7D22;&#x5F15;&#x4F18;&#x5316; &#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x9002;&#x7528;&#x7684;&#x7ED3;&#x8BBA;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;SQL&#x4F18;&#x5316;&#x5668;&#x7B49;&#x539F;&#x56E0;  &#x8BE5;&#x7ED3;&#x8BBA;&#x4E0D;&#x662F;100%&#x6B63;&#x786E;&#x3002;
-- &#x4E00;&#x822C;&#x800C;&#x8A00;&#xFF0C;&#x8303;&#x56F4;&#x67E5;&#x8BE2;&#xFF08;&gt; &lt;  in&#xFF09;&#xFF0C;&#x4E4B;&#x540E;&#x7684;&#x7D22;&#x5F15;&#x5931;&#x6548;&#x3002;
</code></pre>
</li>
<li><p>&#x8865;&#x6551;&#x3002;</p>
<pre><code class="lang-mysql">-- &#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x8986;&#x76D6;&#xFF08;using index&#xFF09;
-- &#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF08;a,b,c&#xFF09;
select a,b,c from xx where a=.. and b =.. ;
</code></pre>
</li>
<li><p>like&#x5C3D;&#x91CF;&#x4EE5;&#x201C;&#x5E38;&#x91CF;&#x201D;&#x5F00;&#x5934;&#xFF0C;&#x4E0D;&#x8981;&#x4EE5;&apos;%&apos;&#x5F00;&#x5934;&#xFF0C;&#x5426;&#x5219;&#x7D22;&#x5F15;&#x5931;&#x6548;  </p>
<pre><code class="lang-mysql">select * from xx where name like &apos;%x%&apos; ; -- name&#x7D22;&#x5F15;&#x5931;&#x6548;
explain select * from teacher  where tname like &apos;%x%&apos;; -- tname&#x7D22;&#x5F15;&#x5931;&#x6548;
explain select * from teacher  where tname like &apos;x%&apos;;
explain select tname from teacher  where tname like &apos;%x%&apos;; 
-- &#x5982;&#x679C;&#x5FC5;&#x987B;&#x4F7F;&#x7528;like &apos;%x%&apos;&#x8FDB;&#x884C;&#x6A21;&#x7CCA;&#x67E5;&#x8BE2;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x8986;&#x76D6; &#x633D;&#x6551;&#x4E00;&#x90E8;&#x5206;&#x3002;
</code></pre>
</li>
<li><p>&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x4F7F;&#x7528;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#xFF08;&#x663E;&#x793A;&#x3001;&#x9690;&#x5F0F;&#xFF09;&#xFF0C;&#x5426;&#x5219;&#x7D22;&#x5F15;&#x5931;&#x6548;</p>
<pre><code class="lang-mysql">explain select * from teacher where tname = &apos;abc&apos; ;
explain select * from teacher where tname = 123 ;  -- &#x7A0B;&#x5E8F;&#x5E95;&#x5C42;&#x5C06; 123 -&gt; &apos;123&apos;&#xFF0C;&#x5373;&#x8FDB;&#x884C;&#x4E86;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#xFF0C;&#x56E0;&#x6B64;&#x7D22;&#x5F15;&#x5931;&#x6548;
</code></pre>
</li>
<li><p>&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x4F7F;&#x7528;or&#xFF0C;&#x5426;&#x5219;&#x7D22;&#x5F15;&#x5931;&#x6548;</p>
<pre><code class="lang-mysql">explain select * from teacher where tname =&apos;&apos; or tcid &gt; 1 ; -- &#x5C06;or&#x5DE6;&#x4FA7;&#x7684;tname&#x5931;&#x6548;&#x3002;
</code></pre>
</li>
</ol>
<h1 id="&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x7684;&#x4F18;&#x5316;&#x65B9;&#x6CD5;">&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x7684;&#x4F18;&#x5316;&#x65B9;&#x6CD5;</h1>
<ul>
<li><p><strong>exist&#x548C;in &#x5B50;&#x67E5;&#x8BE2;</strong></p>
<ul>
<li><strong>exist&#x8BED;&#x6CD5;</strong>&#xFF1A;  </li>
</ul>
<p>&#x200B;       select .. from table where exist (&#x5B50;&#x67E5;&#x8BE2;) ;<br>&#x200B;      &#x5C06;&#x4E3B;&#x67E5;&#x8BE2;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x653E;&#x5230;&#x5B50;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#x4E2D;&#x8FDB;&#x884C;&#x6761;&#x4EF6;&#x6821;&#x9A8C;&#xFF08;&#x770B;&#x5B50;&#x67E5;&#x8BE2;&#x662F;&#x5426;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x6570;&#x636E;&#x5219;&#x6821;&#x9A8C;&#x6210;&#x529F;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x590D;&#x5408;&#x6821;&#x9A8C;&#xFF0C;&#x5219;&#x4FDD;&#x7559;&#x6570;&#x636E;&#xFF1B;<br>&#x200B;       select tname from teacher where exists (select <em> from teacher) ;<br>&#x200B;       -- &#x7B49;&#x4EF7;&#x4E8E;select tname from teacher<br>&#x200B;      select tname from teacher where exists (select </em> from teacher where tid =9999) ;  </p>
<ul>
<li><p><strong>in&#x8BED;&#x6CD5;: </strong> </p>
<p>select .. from table where &#x5B57;&#x6BB5; in  (&#x5B50;&#x67E5;&#x8BE2;) ;  </p>
<p>select .. from table where tid in  (1,3,5) ;  </p>
</li>
<li><p><strong>&#x539F;&#x5219;&#xFF1A;</strong><br>-- &#x5982;&#x679C;&#x4E3B;&#x67E5;&#x8BE2;&#x7684;&#x6570;&#x636E;&#x96C6;&#x5927;&#xFF0C;&#x5219;&#x4F7F;&#x7528;in,&#x6548;&#x7387;&#x9AD8;&#x3002;<br>-- &#x5982;&#x679C;&#x5B50;&#x67E5;&#x8BE2;&#x7684;&#x6570;&#x636E;&#x96C6;&#x5927;&#xFF0C;&#x5219;&#x4F7F;&#x7528;exist,&#x6548;&#x7387;&#x9AD8;&#x3002; </p>
</li>
</ul>
</li>
<li><p><strong>order by &#x4F18;&#x5316;</strong></p>
<ul>
<li><p>using filesort&#x6839;&#x636E;IO&#x6B21;&#x6570;&#x6709;&#x4E24;&#x79CD;&#x7B97;&#x6CD5;&#xFF1A;</p>
<ul>
<li>&#x53CC;&#x8DEF;&#x6392;&#x5E8F;<br>MySQL4.1&#x4E4B;&#x524D; &#x9ED8;&#x8BA4;&#x4F7F;&#x7528; &#x53CC;&#x8DEF;&#x6392;&#x5E8F;&#x3002;&#x53CC;&#x8DEF;&#xFF1A;&#x626B;&#x63CF;2&#x6B21;&#x78C1;&#x76D8;&#xFF08;1&#xFF1A;&#x4ECE;&#x78C1;&#x76D8;&#x8BFB;&#x53D6;&#x6392;&#x5E8F;&#x5B57;&#x6BB5; ,&#x5BF9;&#x6392;&#x5E8F;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF08;&#x5728;buffer&#x4E2D;&#x8FDB;&#x884C;&#x7684;&#x6392;&#x5E8F;&#xFF09;   2&#xFF1A;&#x626B;&#x63CF;&#x5176;&#x4ED6;&#x5B57;&#x6BB5; &#xFF09;--IO&#x8F83;&#x6D88;&#x8017;&#x6027;&#x80FD;  </li>
<li>&#x5355;&#x8DEF;&#x6392;&#x5E8F;<br>MySQL4.1&#x4E4B;&#x540E; &#x9ED8;&#x8BA4;&#x4F7F;&#x7528; &#x5355;&#x8DEF;&#x6392;&#x5E8F;&#x3002;&#x53EA;&#x8BFB;&#x53D6;&#x4E00;&#x6B21;&#xFF08;&#x5168;&#x90E8;&#x5B57;&#x6BB5;&#xFF09;&#xFF0C;&#x5728;buffer&#x4E2D;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x4F46;&#x79CD;&#x5355;&#x8DEF;&#x6392;&#x5E8F;&#x4F1A;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x9690;&#x60A3; &#xFF08;&#x4E0D;&#x4E00;&#x5B9A;&#x771F;&#x7684;&#x662F;&#x201C;&#x5355;&#x8DEF;|1&#x6B21;IO&#x201D;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x591A;&#x6B21;IO&#xFF09;&#x3002;&#x539F;&#x56E0;&#xFF1A;&#x5982;&#x679C;&#x6570;&#x636E;&#x91CF;&#x7279;&#x522B;&#x5927;&#xFF0C;&#x5219;&#x65E0;&#x6CD5;&#x5C06;&#x6240;&#x6709;&#x5B57;&#x6BB5;&#x7684;&#x6570;&#x636E;&#x4E00;&#x6B21;&#x6027;&#x8BFB;&#x53D6;&#x5B8C;&#x6BD5;&#xFF0C;&#x56E0;&#x6B64; &#x4F1A;&#x8FDB;&#x884C;&#x201C;&#x5206;&#x7247;&#x8BFB;&#x53D6;&#x3001;&#x591A;&#x6B21;&#x8BFB;&#x53D6;&#x201D;&#x3002;  </li>
<li>&#x6CE8;&#x610F;&#xFF1A;&#x5355;&#x8DEF;&#x6392;&#x5E8F;&#x6BD4;&#x53CC;&#x8DEF;&#x6392;&#x5E8F;&#x4F1A;&#x5360;&#x7528;&#x66F4;&#x591A;&#x7684;buffer&#x3002;<br>&#x5355;&#x8DEF;&#x6392;&#x5E8F;&#x5728;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x636E;&#x5927;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x8C03;&#x5927;buffer&#x7684;&#x5BB9;&#x91CF;&#x5927;&#x5C0F;&#xFF1A;set max_length_for_sort_data = 1024&#xFF08;&#x5355;&#x4F4D;byte&#xFF09;<br>&#x5982;&#x679C;max_length_for_sort_data&#x503C;&#x592A;&#x4F4E;&#xFF08;&#x9700;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x5217;&#x7684;&#x603B;&#x5927;&#x5C0F;&#x8D85;&#x8FC7;&#x4E86;max_length_for_sort_data&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF09;&#xFF0C;&#x5219;mysql&#x4F1A;&#x81EA;&#x52A8;&#x4ECE; &#x5355;&#x8DEF;-&gt;&#x53CC;&#x8DEF;  </li>
</ul>
</li>
<li><p>&#x63D0;&#x9AD8;order by&#x67E5;&#x8BE2;&#x7684;&#x7B56;&#x7565;&#xFF1A;<br>a. &#x9009;&#x62E9;&#x4F7F;&#x7528;&#x5355;&#x8DEF;&#x3001;&#x53CC;&#x8DEF;&#xFF1B;&#x8C03;&#x6574;buffer&#x7684;&#x5BB9;&#x91CF;&#x5927;&#x5C0F;&#xFF1B;
b. &#x907F;&#x514D;select * ...<br>c. &#x590D;&#x5408;&#x7D22;&#x5F15;&#x4E0D;&#x8981;&#x8DE8;&#x5217;&#x4F7F;&#x7528;&#xFF0C;&#x907F;&#x514D;using filesort<br>d. &#x4FDD;&#x8BC1;&#x5168;&#x90E8;&#x7684;&#x6392;&#x5E8F;&#x5B57;&#x6BB5;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x81F4;&#x6027;&#xFF08;&#x90FD;&#x662F;&#x5347;&#x5E8F; &#x6216; &#x964D;&#x5E8F;&#xFF09;  </p>
</li>
</ul>
</li>
</ul>
<h1 id="sql&#x6392;&#x67E5;">SQL&#x6392;&#x67E5;</h1>
<ul>
<li><p>&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;:<br>MySQL&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x79CD;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#xFF0C;&#x7528;&#x4E8E;&#x8BB0;&#x5F55;MySQL&#x4E2D;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;&#x9600;&#x503C;&#x7684;SQL&#x8BED;&#x53E5; &#xFF08;long_query_time&#xFF0C;&#x9ED8;&#x8BA4;10&#x79D2;&#xFF09;<br>&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x9ED8;&#x8BA4;&#x662F;&#x5173;&#x95ED;&#x7684;&#xFF1B;&#x5EFA;&#x8BAE;&#xFF1A;&#x5F00;&#x53D1;&#x8C03;&#x4F18;&#x65F6;&#x6253;&#x5F00;&#xFF0C;&#x800C;&#x6700;&#x7EC8;&#x90E8;&#x7F72;&#x65F6;&#x5173;&#x95ED;&#x3002;<br>&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x7684;&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#xFF1A;</p>
<pre><code class="lang-mysql">-- &#x68C0;&#x67E5;&#x662F;&#x5426;&#x5F00;&#x542F;&#x4E86;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;
show variables like &apos;%slow_query_log%&apos; ;

-- &#x4E34;&#x65F6;&#x5F00;&#x542F;&#xFF1A;
set global slow_query_log = 1 ;  -- &#x5728;&#x5185;&#x5B58;&#x79CD;&#x5F00;&#x542F;
exit
service mysql restart

-- &#x6C38;&#x4E45;&#x5F00;&#x542F;&#xFF1A;/etc/my.cnf &#x4E2D;&#x8FFD;&#x52A0;&#x914D;&#x7F6E;&#xFF1A;
vi /etc/my.cnf 
[mysqld]
slow_query_log=1
slow_query_log_file=/var/lib/mysql/localhost-slow.log

-- &#x6162;&#x67E5;&#x8BE2;&#x9600;&#x503C;&#xFF1A;
show variables like &apos;%long_query_time%&apos; ;

-- &#x4E34;&#x65F6;&#x8BBE;&#x7F6E;&#x9600;&#x503C;&#xFF1A;
set global long_query_time = 5 ; --&#x8BBE;&#x7F6E;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x767B;&#x9646;&#x540E;&#x8D77;&#x6548; &#xFF08;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x542F;&#x670D;&#x52A1;&#xFF09;

-- &#x6C38;&#x4E45;&#x8BBE;&#x7F6E;&#x9600;&#x503C;&#xFF1A;/etc/my.cnf &#x4E2D;&#x8FFD;&#x52A0;&#x914D;&#x7F6E;&#xFF1A;
vi /etc/my.cnf 
[mysqld]
long_query_time=3

-- &#x6D4B;&#x8BD5;
select sleep(4);
select sleep(5);
select sleep(3);
select sleep(3);
-- &#x67E5;&#x8BE2;&#x8D85;&#x8FC7;&#x9600;&#x503C;&#x7684;SQL&#xFF1A;  
show global status like &apos;%slow_queries%&apos; ;

-- &#x67E5;&#x770B;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;
-- 1. &#x6162;&#x67E5;&#x8BE2;&#x7684;sql&#x88AB;&#x8BB0;&#x5F55;&#x5728;&#x4E86;&#x65E5;&#x5FD7;&#x4E2D;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x65E5;&#x5FD7; &#x67E5;&#x770B;&#x5177;&#x4F53;&#x7684;&#x6162;SQL
cat /var/lib/mysql/localhost-slow.log

-- 2. &#x901A;&#x8FC7;mysqldumpslow&#x5DE5;&#x5177;&#x67E5;&#x770B;&#x6162;SQL,&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E00;&#x4E9B;&#x8FC7;&#x6EE4;&#x6761;&#x4EF6; &#x5FEB;&#x901F;&#x67E5;&#x627E;&#x51FA;&#x9700;&#x8981;&#x5B9A;&#x4F4D;&#x7684;&#x6162;SQL
mysqldumpslow --help
-- s&#xFF1A;&#x6392;&#x5E8F;&#x65B9;&#x5F0F;
-- r:&#x9006;&#x5E8F;
-- l:&#x9501;&#x5B9A;&#x65F6;&#x95F4;
-- g:&#x6B63;&#x5219;&#x5339;&#x914D;&#x6A21;&#x5F0F;
-- &#x8BED;&#x6CD5;&#xFF1A;mysqldumpslow &#x5404;&#x79CD;&#x53C2;&#x6570;  &#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x7684;&#x6587;&#x4EF6;        

-- &#x83B7;&#x53D6;&#x8FD4;&#x56DE;&#x8BB0;&#x5F55;&#x6700;&#x591A;&#x7684;3&#x4E2A;SQL
mysqldumpslow -s r -t 3  /var/lib/mysql/localhost-slow.log

-- &#x83B7;&#x53D6;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x6700;&#x591A;&#x7684;3&#x4E2A;SQL
mysqldumpslow -s c -t 3 /var/lib/mysql/localhost-slow.log

-- &#x6309;&#x7167;&#x65F6;&#x95F4;&#x6392;&#x5E8F;&#xFF0C;&#x524D;10&#x6761;&#x5305;&#x542B;left join&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x7684;SQL
mysqldumpslow -s t -t 10 -g &quot;left join&quot; /var/lib/mysql/localhost-slow.log
</code></pre>
</li>
</ul>
<h1 id="&#x5206;&#x6790;&#x6D77;&#x91CF;&#x6570;&#x636E;">&#x5206;&#x6790;&#x6D77;&#x91CF;&#x6570;&#x636E;</h1>
<ul>
<li><p>&#x6A21;&#x62DF;&#x6D77;&#x91CF;&#x6570;&#x636E;</p>
<ul>
<li>&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#xFF08;&#x65E0;return&#xFF09;  </li>
<li>&#x5B58;&#x50A8;&#x51FD;&#x6570;&#xFF08;&#x6709;return&#xFF09;</li>
</ul>
<pre><code class="lang-mysql">create database testdata ;
use testdata
create table dept
(
dno int(5) primary key default 0,
dname varchar(20) not null default &apos;&apos;,
loc varchar(30) default &apos;&apos;
)engine=innodb default charset=utf8;

create table emp
(
eid int(5) primary key,
ename varchar(20) not null default &apos;&apos;,
job varchar(20) not null default &apos;&apos;,
deptno int(5) not null default 0
)engine=innodb default charset=utf8;

-- &#x901A;&#x8FC7;&#x5B58;&#x50A8;&#x51FD;&#x6570; &#x63D2;&#x5165;&#x6D77;&#x91CF;&#x6570;&#x636E;&#xFF1A;
-- &#x521B;&#x5EFA;&#x5B58;&#x50A8;&#x51FD;&#x6570;&#xFF1A;
-- randstring(6)  -&gt; &#x51FD;&#x6570;&#x529F;&#x80FD;&#xFF1A;&#x4EA7;&#x751F;6&#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x968F;&#x673A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7528;&#x4E8E;&#x6A21;&#x62DF;&#x5458;&#x5DE5;&#x540D;&#x79F0;&#x59D3;&#x540D;

-- &#x4EA7;&#x751F;&#x968F;&#x673A;&#x5B57;&#x7B26;&#x4E32;
delimiter $ -- &#x9632;&#x6B62;&#x5206;&#x53F7;&#x4EA7;&#x751F;&#x8BED;&#x4E49;&#x4E2D;&#x65AD;
create function randstring(n int)   returns varchar(255) 
begin
    declare  all_str varchar(100) default &apos;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&apos; ;
    declare return_str varchar(255) default &apos;&apos; ;
    declare i int default 0 ; 
    while i&lt;n         
    do    
        -- -- rand()&#x4EA7;&#x751F;[0,1)&#x4E4B;&#x95F4;&#x7684;&#x968F;&#x673A;&#x6570;&#xFF0C;FLOOR(1+rand()*52)-&gt;[1-52]
        set return_str = concat( return_str, substring(all_str, FLOOR(1+rand()*52) ,1));  
        set i=i+1 ;
    end while ;
    return return_str;

end $ 

-- &#x5982;&#x679C;&#x62A5;&#x9519;&#xFF1A;You have an error in your SQL syntax&#xFF0C;&#x8BF4;&#x660E;SQL&#x8BED;&#x53E5;&#x8BED;&#x6CD5;&#x6709;&#x9519;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;SQL&#x8BED;&#x53E5;&#xFF1B;
-- &#x5982;&#x679C;&#x62A5;&#x9519;&#xFF1A;This function has none of DETERMINISTIC, NO SQL, ...(you *might* want to use the less safe log_bin_trust_function_creators variable)
-- &#x662F;&#x56E0;&#x4E3A; &#x5B58;&#x50A8;&#x8FC7;&#x7A0B;/&#x5B58;&#x50A8;&#x51FD;&#x6570;&#x5728;&#x521B;&#x5EFA;&#x65F6; &#x4E0E;&#x4E4B;&#x524D;&#x7684; &#x5F00;&#x542F;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x51B2;&#x7A81;&#x4E86;&#xFF0C;&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#xFF1A;
-- &#x4E34;&#x65F6;&#x89E3;&#x51B3;(&#x5F00;&#x542F;log_bin_trust_function_creators)
show variables like &apos;%log_bin_trust_function_creators%&apos;;
set global log_bin_trust_function_creators = 1;
-- &#x6C38;&#x4E45;&#x89E3;&#x51B3;&#xFF1A;/etc/my.cnf 
[mysqld]
log_bin_trust_function_creators = 1

-- &#x4EA7;&#x751F;&#x968F;&#x673A;&#x6574;&#x6570;
create function ran_num() returns int(5)
begin
    declare i int default 0;
    set i =floor( rand()*100 ) ;
    return i ;
end $

-- &#x901A;&#x8FC7;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x63D2;&#x5165;&#x6D77;&#x91CF;&#x6570;&#x636E;&#xFF1A;emp&#x8868;&#x4E2D;&#xFF0C;10000&#xFF0C;100000
create procedure insert_emp( in eid_start int(10),in data_times int(10))
begin 
    declare i int default 0;
    set autocommit = 0 ;

    repeat    
        insert into emp values(eid_start + i, randstring(5) ,&apos;other&apos; ,ran_num()) ;
        set i=i+1 ;
        until i=data_times
    end repeat ;
    commit ;
end $

-- &#x901A;&#x8FC7;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x63D2;&#x5165;&#x6D77;&#x91CF;&#x6570;&#x636E;&#xFF1A;dept&#x8868;&#x4E2D;  
    create procedure insert_dept(in dno_start int(10) ,in data_times int(10))
    begin
        declare i int default 0;
        set autocommit = 0 ;

        repeat
            insert into dept values(dno_start+i ,randstring(6),randstring(8)) ;
            set i=i+1 ;
            until i=data_times
        end repeat ;
    commit ;
    end$

-- &#x63D2;&#x5165;&#x6570;&#x636E;
delimiter ;   -- &#x5206;&#x9694;&#x7B26;&#x6062;&#x590D;&#x6210;;
call insert_emp(1000,800000) ;
call insert_dept(10,30) ;
</code></pre>
</li>
<li><p>&#x5206;&#x6790;&#x6D77;&#x91CF;&#x6570;&#x636E;:</p>
<pre><code class="lang-mysql"># profiles
-- &#x4F1A;&#x8BB0;&#x5F55;&#x6240;&#x6709;profiling&#x6253;&#x5F00;&#x4E4B;&#x540E;&#x7684;&#x5168;&#x90E8;SQL&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x6240;&#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x3002;
-- &#x7F3A;&#x70B9;&#xFF1A;&#x4E0D;&#x591F;&#x7CBE;&#x786E;&#xFF0C;&#x53EA;&#x80FD;&#x770B;&#x5230; &#x603B;&#x5171;&#x6D88;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4E0D;&#x80FD;&#x770B;&#x5230;&#x5404;&#x4E2A;&#x786C;&#x4EF6;&#x6D88;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#xFF08;cpu&#x3001;io&#x7B49;&#xFF09;
show profiles ; -- &#x9ED8;&#x8BA4;&#x5173;&#x95ED;
show variables like &apos;%profiling%&apos;;
set profiling = on ; 

-- &#x65B9;&#x5F0F;1
-- &#x7C97;&#x7565;&#x5206;&#x6790;profiling&#x6253;&#x5F00;&#x4E4B;&#x540E;&#x7684;&#x5168;&#x90E8;SQL&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x6240;&#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x3002;
-- &#x7F3A;&#x70B9;&#xFF1A;&#x4E0D;&#x591F;&#x7CBE;&#x786E;&#xFF0C;&#x53EA;&#x80FD;&#x770B;&#x5230; &#x603B;&#x5171;&#x6D88;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x4E0D;&#x80FD;&#x770B;&#x5230;&#x5404;&#x4E2A;&#x786C;&#x4EF6;&#x6D88;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#xFF08;cpu&#x3001;io&#x7B49;&#xFF09;
show profiles ;

-- &#x65B9;&#x5F0F;2
-- &#x7CBE;&#x786E;&#x5206;&#x6790;:sql&#x8BCA;&#x65AD;
show profile all for query &#x4E0A;&#x4E00;&#x6B65;&#x67E5;&#x8BE2;&#x7684;&#x7684;Query_Id
show profile cpu,block io for query &#x4E0A;&#x4E00;&#x6B65;&#x67E5;&#x8BE2;&#x7684;&#x7684;Query_Id

-- &#x65B9;&#x5F0F;3
-- &#x5168;&#x5C40;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7; &#xFF1A;&#x8BB0;&#x5F55;&#x5F00;&#x542F;&#x4E4B;&#x540E;&#x7684;&#x5168;&#x90E8;SQL&#x8BED;&#x53E5;&#x3002; 
-- &#x8FD9;&#x6B21;&#x5168;&#x5C40;&#x7684;&#x8BB0;&#x5F55;&#x64CD;&#x4F5C;&#x4EC5;&#x4EC5;&#x5728;&#x8C03;&#x4F18;&#x3001;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x6253;&#x5F00;&#x5373;&#x53EF;&#xFF0C;&#x5728;&#x6700;&#x7EC8;&#x7684;&#x90E8;&#x7F72;&#x5B9E;&#x65BD;&#x65F6;&#x4E00;&#x5B9A;&#x5173;&#x95ED;
show variables like &apos;%general_log%&apos;;

-- &#x6267;&#x884C;&#x7684;&#x6240;&#x6709;SQL&#x8BB0;&#x5F55;&#x5728;&#x8868;&#x4E2D;
set global general_log = 1 ; -- &#x5F00;&#x542F;&#x5168;&#x5C40;&#x65E5;&#x5FD7;
set global log_output=&apos;table&apos; ; -- &#x8BBE;&#x7F6E; &#x5C06;&#x5168;&#x90E8;&#x7684;SQL &#x8BB0;&#x5F55;&#x5728;&#x8868;&#x4E2D;

--&#x6267;&#x884C;&#x7684;&#x6240;&#x6709;SQL&#x8BB0;&#x5F55;&#x5728;&#x6587;&#x4EF6;&#x4E2D;
set global log_output=&apos;file&apos; ;
set global general_log = on ;
set global general_log_file=&apos;/tmp/general.log&apos; ;
-- &#x5F00;&#x542F;&#x540E;&#xFF0C;&#x6240;&#x6709;SQL&#x4F1A;&#x88AB;&#x8BB0;&#x5F55; mysql.general_log&#x8868;&#x4E2D;&#x3002;
select * from  mysql.general_log ;
</code></pre>
</li>
</ul>
<h1 id="&#x9501;&#x673A;&#x5236;">&#x9501;&#x673A;&#x5236;</h1>
<ul>
<li><p>&#x89E3;&#x51B3;&#x56E0;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#x800C;&#x9020;&#x6210;&#x7684;&#x5E76;&#x53D1;&#x95EE;&#x9898;&#x3002;  </p>
</li>
<li><p><strong>&#x5206;&#x7C7B;</strong>  </p>
<ul>
<li>&#x6309;&#x7167;&#x64CD;&#x4F5C;&#x7C7B;&#x578B;&#xFF1A;<br>a.&#x8BFB;&#x9501;&#xFF08;&#x5171;&#x4EAB;&#x9501;&#xFF09;&#xFF1A; &#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#xFF0C;&#x591A;&#x4E2A;&#x8BFB;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x8FDB;&#x884C;&#xFF0C;&#x4E92;&#x4E0D;&#x5E72;&#x6270;&#x3002;<br>b.&#x5199;&#x9501;&#xFF08;&#x4E92;&#x65A5;&#x9501;&#xFF09;&#xFF1A; &#x5982;&#x679C;&#x5F53;&#x524D;&#x5199;&#x64CD;&#x4F5C;&#x6CA1;&#x6709;&#x5B8C;&#x6BD5;&#xFF0C;&#x5219;&#x65E0;&#x6CD5;&#x8FDB;&#x884C;&#x5176;&#x4ED6;&#x7684;&#x8BFB;&#x64CD;&#x4F5C;&#x3001;&#x5199;&#x64CD;&#x4F5C;&#x3002;  </li>
<li>&#x64CD;&#x4F5C;&#x8303;&#x56F4;&#xFF1A;<br>a.&#x8868;&#x9501; &#xFF1A;&#x4E00;&#x6B21;&#x6027;&#x5BF9;&#x4E00;&#x5F20;&#x8868;&#x6574;&#x4F53;&#x52A0;&#x9501;&#x3002;&#x5982;MyISAM&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x4F7F;&#x7528;&#x8868;&#x9501;&#xFF0C;&#x5F00;&#x9500;&#x5C0F;&#x3001;&#x52A0;&#x9501;&#x5FEB;&#xFF1B;&#x65E0;&#x6B7B;&#x9501;&#xFF1B;&#x4F46;&#x9501;&#x7684;&#x8303;&#x56F4;&#x5927;&#xFF0C;&#x5BB9;&#x6613;&#x53D1;&#x751F;&#x9501;&#x51B2;&#x7A81;&#x3001;&#x5E76;&#x53D1;&#x5EA6;&#x4F4E;&#x3002;<br>b.&#x884C;&#x9501; &#xFF1A;&#x4E00;&#x6B21;&#x6027;&#x5BF9;&#x4E00;&#x6761;&#x6570;&#x636E;&#x52A0;&#x9501;&#x3002;&#x5982;InnoDB&#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x4F7F;&#x7528;&#x884C;&#x9501;&#xFF0C;&#x5F00;&#x9500;&#x5927;&#xFF0C;&#x52A0;&#x9501;&#x6162;&#xFF1B;&#x5BB9;&#x6613;&#x51FA;&#x73B0;&#x6B7B;&#x9501;&#xFF1B;&#x9501;&#x7684;&#x8303;&#x56F4;&#x8F83;&#x5C0F;&#xFF0C;&#x4E0D;&#x6613;&#x53D1;&#x751F;&#x9501;&#x51B2;&#x7A81;&#xFF0C;&#x5E76;&#x53D1;&#x5EA6;&#x9AD8;&#xFF08;&#x5F88;&#x5C0F;&#x6982;&#x7387; &#x53D1;&#x751F;&#x9AD8;&#x5E76;&#x53D1;&#x95EE;&#x9898;&#xFF1A;&#x810F;&#x8BFB;&#x3001;&#x5E7B;&#x8BFB;&#x3001;&#x4E0D;&#x53EF;&#x91CD;&#x590D;&#x5EA6;&#x3001;&#x4E22;&#x5931;&#x66F4;&#x65B0;&#x7B49;&#x95EE;&#x9898;&#xFF09;&#x3002;<br>c.&#x9875;&#x9501;  </li>
</ul>
</li>
<li><p><strong>&#x8868;&#x9501;&#xFF08;MyISAM&#xFF09;</strong></p>
<pre><code class="lang-mysql">-- &#x8868;&#x9501;
-- &#x81EA;&#x589E;&#x64CD;&#x4F5C; MYSQL/SQLSERVER &#x652F;&#x6301;&#xFF1B;oracle&#x9700;&#x8981;&#x501F;&#x52A9;&#x4E8E;&#x5E8F;&#x5217;&#x6765;&#x5B9E;&#x73B0;&#x81EA;&#x589E;

create table tablelock
(
id int primary key auto_increment , 
name varchar(20)
)engine myisam;

insert into tablelock(name) values(&apos;a1&apos;);
insert into tablelock(name) values(&apos;a2&apos;);
insert into tablelock(name) values(&apos;a3&apos;);
insert into tablelock(name) values(&apos;a4&apos;);
insert into tablelock(name) values(&apos;a5&apos;);
commit;

-- &#x589E;&#x52A0;&#x9501;&#xFF1A;
lock table &#x8868;1  read/write  ,&#x8868;2  read/write   ,...

-- &#x67E5;&#x770B;&#x52A0;&#x9501;&#x7684;&#x8868;&#xFF1A;
show open tables ;

-- &#x4F1A;&#x8BDD;&#xFF1A;session :&#x6BCF;&#x4E00;&#x4E2A;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x7684;dos&#x547D;&#x4EE4;&#x884C;&#x3001;&#x6570;&#x636E;&#x5E93;&#x5BA2;&#x6237;&#x7AEF;&#x5DE5;&#x5177; &#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x4F1A;&#x8BDD;

-- *******************&#x52A0;&#x8BFB;&#x9501;&#xFF1A;
-- &#x4F1A;&#x8BDD;0&#xFF1A;
lock table tablelock read ;
select * from tablelock; -- &#x8BFB;&#xFF08;&#x67E5;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;
delete from tablelock where id =1 ; -- &#x5199;&#xFF08;&#x589E;&#x5220;&#x6539;&#xFF09;&#xFF0C;&#x4E0D;&#x53EF;&#x4EE5;

select * from emp ; -- &#x8BFB;&#xFF0C;&#x4E0D;&#x53EF;&#x4EE5;
delete from emp where eid = 1; -- &#x5199;&#xFF0C;&#x4E0D;&#x53EF;&#x4EE5;
-- &#x7ED3;&#x8BBA;1&#xFF1A;
-- &#x5982;&#x679C;&#x67D0;&#x4E00;&#x4E2A;&#x4F1A;&#x8BDD; &#x5BF9;A&#x8868;&#x52A0;&#x4E86;read&#x9501;&#xFF0C;&#x5219; &#x8BE5;&#x4F1A;&#x8BDD; &#x53EF;&#x4EE5;&#x5BF9;A&#x8868;&#x8FDB;&#x884C;&#x8BFB;&#x64CD;&#x4F5C;&#x3001;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#xFF1B; &#x4E14;&#x8BE5;&#x4F1A;&#x8BDD;&#x4E0D;&#x80FD;&#x5BF9;&#x5176;&#x4ED6;&#x8868;&#x8FDB;&#x884C;&#x8BFB;&#x3001;&#x5199;&#x64CD;&#x4F5C;&#x3002;
-- &#x5373;&#x5982;&#x679C;&#x7ED9;A&#x8868;&#x52A0;&#x4E86;&#x8BFB;&#x9501;&#xFF0C;&#x5219;&#x5F53;&#x524D;&#x4F1A;&#x8BDD;&#x53EA;&#x80FD;&#x5BF9;A&#x8868;&#x8FDB;&#x884C;&#x8BFB;&#x64CD;&#x4F5C;&#x3002;

-- &#x4F1A;&#x8BDD;1&#xFF08;&#x5176;&#x4ED6;&#x4F1A;&#x8BDD;&#xFF09;&#xFF1A;
select * from tablelock;   -- &#x8BFB;&#xFF08;&#x67E5;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;
delete from tablelock where id =1 ; -- &#x5199;&#xFF0C;&#x4F1A;&#x201C;&#x7B49;&#x5F85;&#x201D;&#x4F1A;&#x8BDD;0&#x5C06;&#x9501;&#x91CA;&#x653E;
</code></pre>
<ul>
<li><p>MySQL&#x8868;&#x7EA7;&#x9501;&#x7684;&#x9501;&#x6A21;&#x5F0F;  </p>
<ol>
<li>MyISAM&#x5728;&#x6267;&#x884C;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#xFF08;SELECT&#xFF09;&#x524D;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x7ED9;&#x6D89;&#x53CA;&#x7684;&#x6240;&#x6709;&#x8868;&#x52A0;&#x8BFB;&#x9501;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#xFF08;DML&#xFF09;&#x524D;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x7ED9;&#x6D89;&#x53CA;&#x7684;&#x8868;&#x52A0;&#x5199;&#x9501;&#x3002;&#x6240;&#x4EE5;&#x5BF9;MyISAM&#x8868;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x4F1A;&#x6709;&#x4EE5;&#x4E0B;&#x60C5;&#x51B5;&#xFF1A;  </li>
<li>&#x5BF9;MyISAM&#x8868;&#x7684;&#x8BFB;&#x64CD;&#x4F5C;&#xFF08;&#x52A0;&#x8BFB;&#x9501;&#xFF09;&#xFF0C;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#x5176;&#x4ED6;&#x8FDB;&#x7A0B;&#xFF08;&#x4F1A;&#x8BDD;&#xFF09;&#x5BF9;&#x540C;&#x4E00;&#x8868;&#x7684;&#x8BFB;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x4F1A;&#x963B;&#x585E;&#x5BF9;&#x540C;&#x4E00;&#x8868;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x3002;&#x53EA;&#x6709;&#x5F53;&#x8BFB;&#x9501;&#x91CA;&#x653E;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x6267;&#x884C;&#x5176;&#x5B83;&#x8FDB;&#x7A0B;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x3002;  </li>
<li>&#x5BF9;MyISAM&#x8868;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#xFF08;&#x52A0;&#x5199;&#x9501;&#xFF09;&#xFF0C;&#x4F1A;&#x963B;&#x585E;&#x5176;&#x4ED6;&#x8FDB;&#x7A0B;&#xFF08;&#x4F1A;&#x8BDD;&#xFF09;&#x5BF9;&#x540C;&#x4E00;&#x8868;&#x7684;&#x8BFB;&#x548C;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x5199;&#x9501;&#x91CA;&#x653E;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x6267;&#x884C;&#x5176;&#x5B83;&#x8FDB;&#x7A0B;&#x7684;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x3002;  </li>
</ol>
</li>
<li><p>&#x5206;&#x6790;&#x8868;&#x7684;&#x9501;&#x5B9A;&#xFF0C;&#x5F15;&#x64CE;&#x9009;&#x53D6;  </p>
<ul>
<li>&#x67E5;&#x770B;&#x54EA;&#x4E9B;&#x8868;&#x52A0;&#x4E86;&#x9501;&#xFF1A;<br>show open tables ;  -- 1&#x4EE3;&#x8868;&#x88AB;&#x52A0;&#x4E86;&#x9501;  </li>
<li>&#x5206;&#x6790;&#x8868;&#x9501;&#x5B9A;&#x7684;&#x4E25;&#x91CD;&#x7A0B;&#x5EA6;&#xFF1A;<br>show status like &apos;table%&apos; ;<br>-- Table_locks_immediate :&#x5373;&#x53EF;&#x80FD;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x9501;&#x6570;<br>-- Table_locks_waited&#xFF1A;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x7684;&#x8868;&#x9501;&#x6570;(&#x5982;&#x679C;&#x8BE5;&#x503C;&#x8D8A;&#x5927;&#xFF0C;&#x8BF4;&#x660E;&#x5B58;&#x5728;&#x8D8A;&#x5927;&#x7684;&#x9501;&#x7ADE;&#x4E89;)<br>-- &#x4E00;&#x822C;&#x5EFA;&#x8BAE;&#xFF1A;Table_locks_immediate/Table_locks_waited &gt; 5000&#xFF0C; &#x5EFA;&#x8BAE;&#x91C7;&#x7528;InnoDB&#x5F15;&#x64CE;&#xFF0C;&#x5426;&#x5219;MyISAM&#x5F15;&#x64CE;  </li>
</ul>
</li>
</ul>
</li>
<li><p><strong>&#x884C;&#x9501;&#xFF08;InnoDB&#xFF09;</strong></p>
<pre><code class="lang-mysql">create table linelock
(
    id int(5) primary key auto_increment,
    name varchar(20)
)engine=innodb ;

insert into linelock(name) values(&apos;1&apos;)  ;
insert into linelock(name) values(&apos;2&apos;)  ;
insert into linelock(name) values(&apos;3&apos;)  ;
insert into linelock(name) values(&apos;4&apos;)  ;
insert into linelock(name) values(&apos;5&apos;)  ;

-- mysql&#x9ED8;&#x8BA4;&#x81EA;&#x52A8;commit;    oracle&#x9ED8;&#x8BA4;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;commit ;
-- &#x4E3A;&#x4E86;&#x7814;&#x7A76;&#x884C;&#x9501;&#xFF0C;&#x6682;&#x65F6;&#x5C06;&#x81EA;&#x52A8;commit&#x5173;&#x95ED;;  set autocommit =0 ; &#x4EE5;&#x540E;&#x9700;&#x8981;&#x901A;&#x8FC7;commit

-- **************&#x5199;&#x64CD;&#x4F5C;&#xFF08;&#x884C;&#x9501; &#x64CD;&#x4F5C;&#x540C;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF09;
-- &#x4F1A;&#x8BDD;0&#xFF1A; &#x5199;&#x64CD;&#x4F5C;
insert into linelock values(&apos;a6&apos;) ;

-- &#x4F1A;&#x8BDD;1&#xFF1A; &#x5199;&#x64CD;&#x4F5C; &#x540C;&#x6837;&#x7684;&#x6570;&#x636E;
update linelock set name=&apos;ax&apos; where id = 6;

-- &#x5BF9;&#x884C;&#x9501;&#x60C5;&#x51B5;&#xFF1A;
-- 1.&#x5982;&#x679C;&#x4F1A;&#x8BDD;x&#x5BF9;&#x67D0;&#x6761;&#x6570;&#x636E;a&#x8FDB;&#x884C; DML(&#x589E;&#x5220;&#x6539;)&#x64CD;&#x4F5C;&#xFF08;&#x7814;&#x7A76;&#x65F6;&#xFF1A;&#x5173;&#x95ED;&#x4E86;&#x81EA;&#x52A8;commit&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF09;&#xFF0C;&#x5219;&#x5176;&#x4ED6;&#x4F1A;&#x8BDD;&#x5FC5;&#x987B;&#x7B49;&#x5F85;&#x4F1A;&#x8BDD;x&#x7ED3;&#x675F;&#x4E8B;&#x52A1;(commit/rollback)&#x540E;&#x624D;&#x80FD;&#x5BF9;&#x6570;&#x636E;a&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;
-- 2.&#x8868;&#x9501; &#x662F;&#x901A;&#x8FC7;unlock tables&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E8B;&#x52A1;&#x89E3;&#x9501; ; &#x884C;&#x9501; &#x662F;&#x901A;&#x8FC7;&#x4E8B;&#x52A1;(commit/rollback)&#x89E3;&#x9501;&#x3002;

-- **************&#x5199;&#x64CD;&#x4F5C;&#xFF08;&#x884C;&#x9501; &#x64CD;&#x4F5C;&#x4E0D;&#x540C;&#x6761;&#x8BB0;&#x5F55;&#xFF09;
-- &#x4F1A;&#x8BDD;0&#xFF1A; &#x5199;&#x64CD;&#x4F5C;
insert into linelock values(8,&apos;a8&apos;) ;
-- &#x4F1A;&#x8BDD;1&#xFF1A; &#x5199;&#x64CD;&#x4F5C;&#xFF0C; &#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;
update linelock set name=&apos;ax&apos; where id = 5;
-- &#x884C;&#x9501;&#xFF0C;&#x4E00;&#x6B21;&#x9501;&#x4E00;&#x884C;&#x6570;&#x636E;&#xFF1B;&#x56E0;&#x6B64; &#x5982;&#x679C;&#x64CD;&#x4F5C;&#x7684;&#x662F;&#x4E0D;&#x540C;&#x6570;&#x636E;&#xFF0C;&#x5219;&#x4E0D;&#x5E72;&#x6270;&#x3002;

-- &#x884C;&#x9501;&#x7684;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;
-- a.&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7D22;&#x5F15;&#xFF0C;&#x5219;&#x884C;&#x9501;&#x4F1A;&#x8F6C;&#x4E3A;&#x8868;&#x9501;
show index from linelock ;
alter table linelock add index idx_linelock_name(name);

-- &#x4F1A;&#x8BDD;0&#xFF1A; &#x5199;&#x64CD;&#x4F5C;
update linelock set name = &apos;ai&apos; where name = &apos;3&apos; ;

-- &#x4F1A;&#x8BDD;1&#xFF1A; &#x5199;&#x64CD;&#x4F5C;&#xFF0C; &#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;
update linelock set name = &apos;aiX&apos; where name = &apos;4&apos; ;

-- &#x4F1A;&#x8BDD;0&#xFF1A; &#x5199;&#x64CD;&#x4F5C;
update linelock set name = &apos;ai&apos; where name = 3 ;

-- &#x4F1A;&#x8BDD;1&#xFF1A; &#x5199;&#x64CD;&#x4F5C;&#xFF0C; &#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;
update linelock set name = &apos;aiX&apos; where name = 4 ;
-- &#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x6570;&#x636E;&#x88AB;&#x963B;&#x585E;&#x4E86;&#xFF08;&#x52A0;&#x9501;&#xFF09;
-- &#x539F;&#x56E0;&#xFF1A;&#x5982;&#x679C;&#x7D22;&#x5F15;&#x7C7B; &#x53D1;&#x751F;&#x4E86;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#xFF0C;&#x5219;&#x7D22;&#x5F15;&#x5931;&#x6548;&#x3002; &#x56E0;&#x6B64; &#x6B64;&#x6B21;&#x64CD;&#x4F5C;&#xFF0C;&#x4F1A;&#x4ECE;&#x884C;&#x9501; &#x8F6C;&#x4E3A;&#x8868;&#x9501;&#x3002;

-- *********** &#x884C;&#x9501;&#x7684;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#xFF08;&#x95F4;&#x9699;&#x9501;&#xFF09;
-- &#x95F4;&#x9699;&#x9501;&#xFF1A;&#x503C;&#x5728;&#x8303;&#x56F4;&#x5185;&#xFF0C;&#x4F46;&#x5374;&#x4E0D;&#x5B58;&#x5728;
-- &#x6B64;&#x65F6;linelock&#x8868;&#x4E2D; &#x6CA1;&#x6709;id=7&#x7684;&#x6570;&#x636E;
update linelock set name =&apos;x&apos; where id &gt;1 and id&lt;9 ;   -- &#x5373;&#x5728;&#x6B64;where&#x8303;&#x56F4;&#x4E2D;&#xFF0C;&#x6CA1;&#x6709;id=7&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5219;id=7&#x7684;&#x6570;&#x636E;&#x6210;&#x4E3A;&#x95F4;&#x9699;&#x3002;
-- &#x95F4;&#x9699;&#xFF1A;Mysql&#x4F1A;&#x81EA;&#x52A8;&#x7ED9; &#x95F4;&#x9699;&#x52A0;&#x9501; -&gt;&#x95F4;&#x9699;&#x9501;&#x3002;&#x5373; &#x672C;&#x9898; &#x4F1A;&#x81EA;&#x52A8;&#x7ED9;id=7&#x7684;&#x6570;&#x636E;&#x52A0; &#x95F4;&#x9699;&#x9501;&#xFF08;&#x884C;&#x9501;&#xFF09;&#x3002;
-- &#x884C;&#x9501;&#xFF1A;&#x5982;&#x679C;&#x6709;where&#xFF0C;&#x5219;&#x5B9E;&#x9645;&#x52A0;&#x9501;&#x7684;&#x8303;&#x56F4; &#x5C31;&#x662F;where&#x540E;&#x9762;&#x7684;&#x8303;&#x56F4;&#xFF08;&#x4E0D;&#x662F;&#x5B9E;&#x9645;&#x7684;&#x503C;&#xFF09;

-- ***********&#x5982;&#x4F55;&#x4EC5;&#x4EC5;&#x662F;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#xFF0C;&#x80FD;&#x5426;&#x52A0;&#x9501;&#xFF1F; &#x53EF;&#x4EE5;&#xFF0C;&#x901A;&#x8FC7;for update 
-- &#x7814;&#x7A76;&#x5B66;&#x4E60;&#x65F6;&#xFF0C;&#x5C06;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x5173;&#x95ED;&#xFF1A;
set autocommit =0 ;
start transaction ;
begin ;
select * from linelock where id=2 for update ;  -- &#x901A;&#x8FC7;for update&#x5BF9;query&#x8BED;&#x53E5;&#x8FDB;&#x884C;&#x52A0;&#x9501;&#x3002;
</code></pre>
<p>&#x200B;</p>
<ul>
<li>&#x884C;&#x9501;&#xFF1A;  <ul>
<li>InnoDB&#x9ED8;&#x8BA4;&#x91C7;&#x7528;&#x884C;&#x9501;&#xFF1B;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x6BD4;&#x8868;&#x9501;&#x6027;&#x80FD;&#x635F;&#x8017;&#x5927;&#x3002;<br>&#x4F18;&#x70B9;&#xFF1A;&#x5E76;&#x53D1;&#x80FD;&#x529B;&#x5F3A;&#xFF0C;&#x6548;&#x7387;&#x9AD8;&#x3002;<br>&#x56E0;&#x6B64;&#x5EFA;&#x8BAE;&#xFF0C;&#x9AD8;&#x5E76;&#x53D1;&#x7528;InnoDB&#xFF0C;&#x5426;&#x5219;&#x7528;MyISAM&#x3002;  </li>
<li>&#x884C;&#x9501;&#x5206;&#x6790;&#xFF1A;
show status like &apos;%innodb_row_lock%&apos; ;<br>Innodb_row_lock_current_waits :&#x5F53;&#x524D;&#x6B63;&#x5728;&#x7B49;&#x5F85;&#x9501;&#x7684;&#x6570;&#x91CF;<br>Innodb_row_lock_time&#xFF1A;&#x7B49;&#x5F85;&#x603B;&#x65F6;&#x957F;&#x3002;&#x4ECE;&#x7CFB;&#x7EDF;&#x542F;&#x5230;&#x73B0;&#x5728; &#x4E00;&#x5171;&#x7B49;&#x5F85;&#x7684;&#x65F6;&#x95F4;<br>Innodb_row_lock_time_avg  &#xFF1A;&#x5E73;&#x5747;&#x7B49;&#x5F85;&#x65F6;&#x957F;&#x3002;&#x4ECE;&#x7CFB;&#x7EDF;&#x542F;&#x5230;&#x73B0;&#x5728;&#x5E73;&#x5747;&#x7B49;&#x5F85;&#x7684;&#x65F6;&#x95F4;<br>Innodb_row_lock_time_max  &#xFF1A;&#x6700;&#x5927;&#x7B49;&#x5F85;&#x65F6;&#x957F;&#x3002;&#x4ECE;&#x7CFB;&#x7EDF;&#x542F;&#x5230;&#x73B0;&#x5728;&#x6700;&#x5927;&#x4E00;&#x6B21;&#x7B49;&#x5F85;&#x7684;&#x65F6;&#x95F4;<br>Innodb_row_lock_waits &#xFF1A;&#x7B49;&#x5F85;&#x6B21;&#x6570;&#x3002;&#x4ECE;&#x7CFB;&#x7EDF;&#x542F;&#x5230;&#x73B0;&#x5728;&#x4E00;&#x5171;&#x7B49;&#x5F85;&#x7684;&#x6B21;&#x6570;  </li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="&#x4E3B;&#x4ECE;&#x590D;&#x5236;">&#x4E3B;&#x4ECE;&#x590D;&#x5236;</h1>
<ul>
<li>&#x96C6;&#x7FA4;&#x5728;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E00;&#x79CD;&#x5B9E;&#x73B0;  </li>
<li><p>&#x73AF;&#x5883;&#x642D;&#x5EFA;<br>windows: mysql&#x4E3B;<br>linux: mysql&#x4ECE;<br>linux&#x7CFB;&#x7EDF;&#x4E0B;&#x5B89;&#x88C5;&#x5728;&#x7B2C;&#x4E00;&#x8282;&#x6709;&#x4ECB;&#x7ECD;&#xFF0C;&#x8FD9;&#x91CC;&#x8BF4;&#x660E;windows&#x7CFB;&#x7EDF;&#x4E0B;mysql&#x7684;&#x5B89;&#x88C5;&#x3002;</p>
<ul>
<li><p>&#x5378;&#x8F7D;&#x539F;&#x6765;&#x7248;&#x672C;<br>&#x200B;  &#x5982;&#x679C;&#x4E4B;&#x524D;&#x8BA1;&#x7B97;&#x673A;&#x4E2D;&#x5B89;&#x88C5;&#x8FC7;Mysql&#xFF0C;&#x8981;&#x91CD;&#x65B0;&#x518D;&#x5B89;&#x88C5;&#x5219;&#x9700;&#x8981;&#xFF1A;&#x5148;&#x5378;&#x8F7D; &#x518D;&#x5B89;&#x88C5;&#x3002;&#x901A;&#x8FC7;&#x7535;&#x8111;&#x81EA;&#x5E26;&#x5378;&#x8F7D;&#x5DE5;&#x5177;&#x5378;&#x8F7D;Mysql (&#x7535;&#x8111;&#x7BA1;&#x5BB6;&#x4E5F;&#x53EF;&#x4EE5;)&#xFF1B;&#x5220;&#x9664;&#x4E00;&#x4E2A;mysql&#x7F13;&#x5B58;&#x6587;&#x4EF6;C:\ProgramData\MySQL&#xFF1B;&#x5220;&#x9664;&#x6CE8;&#x518C;&#x8868;regedit&#x4E2D;&#x6240;&#x6709;mysql&#x76F8;&#x5173;&#x914D;&#x7F6E;&#xFF1B;&#x91CD;&#x542F;&#x8BA1;&#x7B97;&#x673A;&#x3002;  </p>
</li>
<li><p>&#x5B89;&#x88C5;<br>&#x200B;  &#x5B89;&#x88C5;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x672A;&#x54CD;&#x5E94;&#xFF1A;&#x5219;&#x91CD;&#x65B0;&#x6253;&#x5F00;D:\MySQL\MySQL Server 5.5\bin\MySQLInstanceConfig.exe&#xFF0C;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x56FE;&#x5F62;&#x5316;&#x5BA2;&#x6237;&#x7AEF;&#xFF1A; SQLyog / Navicat&#xFF1B;&#x5982;&#x679C;&#x8981;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x6388;&#x6743;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;&#x3002;<br>&#x6388;&#x6743;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE; :(A-&gt;B,&#x5219;&#x518D;B&#x8BA1;&#x7B97;&#x673A;&#x7684;Mysql&#x4E2D;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;)  </p>
</li>
</ul>
<pre><code class="lang-mysql"> GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;root&apos; WITH GRANT OPTION;
 FLUSH PRIVILEGES;
</code></pre>
<p>  &#x5982;&#x679C;&#x4ECD;&#x7136;&#x62A5;&#x9519;&#xFF1A;&#x53EF;&#x80FD;&#x662F;&#x9632;&#x706B;&#x5899;&#x6CA1;&#x5173;&#x95ED; &#xFF1A; &#x5728;B&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;  service iptables stop  </p>
<ul>
<li><p>mysql&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x539F;&#x7406;  </p>
<ol>
<li>master&#x5C06;&#x6539;&#x53D8;&#x7684;&#x6570;&#x636E; &#x8BB0;&#x5F55;&#x5728;&#x672C;&#x5730;&#x7684; &#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x4E2D;&#xFF08;binary log&#xFF09; &#xFF1B;-- &#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x4E8B;&#x4EF6; &#x3002;  </li>
<li>slave&#x5C06;master&#x7684;binary log&#x62F7;&#x8D1D;&#x5230;&#x81EA;&#x5DF1;&#x7684; relay log&#xFF08;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF09;&#x4E2D;&#x3002;  </li>
<li>&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x4E8B;&#x4EF6; &#x5C06;&#x6570;&#x636E;&#x8BFB;&#x53D6;&#x5230;&#x81EA;&#x5DF1;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x4E2D;&#x3002;<br>MYSQL&#x4E3B;&#x4ECE;&#x590D;&#x5236; &#x662F;&#x5F02;&#x6B65;&#x7684;&#xFF0C;&#x4E32;&#x884C;&#x5316;&#x7684;&#xFF0C; &#x6709;&#x5EF6;&#x8FDF; &#x3002; 
master:slave = 1:n  </li>
</ol>
</li>
<li><p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#xFF0C;&#x5F00;&#x542F;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;
&#x200B;  windows&#x914D;&#x7F6E;&#x6587;&#x4EF6; --  <strong>my.ini</strong><br>&#x200B;  linux&#x914D;&#x7F6E;&#x6587;&#x4EF6;  --    <strong>my.cnf</strong><br>&#x200B;     &#x914D;&#x7F6E;&#x524D;&#xFF0C;&#x4E3A;&#x4E86;&#x65E0;&#x8BEF;&#xFF0C;&#x5148;&#x5C06;&#x6743;&#x9650;(&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;)&#x3001;&#x9632;&#x706B;&#x5899;&#x7B49;&#x5904;&#x7406;&#xFF1A;&#x5173;&#x95ED;windows/linux&#x9632;&#x706B;&#x5899;&#xFF1A; windows&#xFF1A;&#x53F3;&#x952E;&#x201C;&#x7F51;&#x7EDC;&#x201D;&#xFF1B;&#x5173;&#x95ED;linux&#x9632;&#x706B;&#x5899;: service iptables stop&#xFF1B; Mysql&#x5141;&#x8BB8;&#x8FDC;&#x7A0B;&#x8FDE;&#x63A5;(windowos/linux)&#xFF1A;</p>
</li>
</ul>
<pre><code class="lang-mysql">GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;root&apos; WITH GRANT OPTION;
FLUSH PRIVILEGES;
</code></pre>
<ul>
<li>&#x4FEE;&#x6539;&#x4E3B;&#x673A;&#x914D;&#x7F6E;&#xFF08;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x548C;&#x64CD;&#x4F5C; &#x5168;&#x90E8;&#x5728;&#x4E3B;&#x673A;windows&#x4E2D;&#x64CD;&#x4F5C;&#xFF09;&#xFF1A; </li>
</ul>
<pre><code class="lang-mysql">-- &#x6253;&#x5F00;my.ini
[mysqld]
#id
server-id=1
#&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF08;&#x6CE8;&#x610F;&#x662F;/  &#x4E0D;&#x662F;\&#xFF09;
log-bin=&quot;D:/MySQL/MySQL Server 5.5/data/mysql-bin&quot;
#&#x9519;&#x8BEF;&#x8BB0;&#x5F55;&#x6587;&#x4EF6;
log-error=&quot;D:/MySQL/MySQL Server 5.5/data/mysql-error&quot;
#&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x65F6;&#x5FFD;&#x7565;&#x7684;&#x6570;&#x636E;&#x5E93;
binlog-ignore-db=mysql
#(&#x53EF;&#x9009;)&#x6307;&#x5B9A;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x65F6;&#xFF0C;&#x540C;&#x6B65;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x5E93;
binlog-do-db=test

-- windows&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5E93; &#x6388;&#x6743;&#x54EA;&#x53F0;&#x8BA1;&#x7B97;&#x673A;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5E93; &#x662F;&#x81EA;&#x5DF1;&#x7684;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#xFF1A;    
  GRANT REPLICATION slave,reload,super ON *.* TO &apos;root&apos;@&apos;192.168.2.%&apos; IDENTIFIED BY &apos;root&apos;;
  flush privileges ; 

-- &#x67E5;&#x770B;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x7684;&#x72B6;&#x6001;&#xFF08;&#x6BCF;&#x6B21;&#x5728;&#x5DE6;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x89C2;&#x5BDF; &#x4E3B;&#x673A;&#x72B6;&#x6001;&#x7684;&#x6700;&#x65B0;&#x503C;&#xFF09;
show master status;  &#xFF08;mysql-bin.000001&#x3001; 107&#xFF09;
</code></pre>
<ul>
<li>&#x4FEE;&#x6539;&#x4ECE;&#x673A;&#x914D;&#x7F6E;&#xFF08;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x548C;&#x64CD;&#x4F5C; &#x5168;&#x90E8;&#x5728;&#x4ECE;&#x673A;linux&#x4E2D;&#x64CD;&#x4F5C;&#xFF09;&#xFF1A; </li>
</ul>
<pre><code class="lang-mysql">-- &#x6253;&#x5F00;my.cnf
[mysqld]
server-id=2
log-bin=mysql-bin
replicate-do-db=test

-- linux&#x4E2D;&#x7684;&#x6570;&#x636E; &#x6388;&#x6743;&#x54EA;&#x53F0;&#x8BA1;&#x7B97;&#x673A;&#x662F;&#x81EA;&#x5DF1;&#x7684;&#x4E3B;&#x8BA1;&#x7B97;&#x673A;
CHANGE MASTER TO 
MASTER_HOST = &apos;192.168.2.2&apos;, 
MASTER_USER = &apos;root&apos;, 
MASTER_PASSWORD = &apos;root&apos;, 
MASTER_PORT = 3306,
master_log_file=&apos;mysql-bin.000001&apos;,
master_log_pos=107;
-- &#x5982;&#x679C;&#x62A5;&#x9519;&#xFF1A;This operation cannot be performed with a running slave; run STOP SLAVE first
-- &#x89E3;&#x51B3;&#xFF1A;STOP SLAVE ;&#x518D;&#x6B21;&#x6267;&#x884C;&#x4E0A;&#x6761;&#x6388;&#x6743;&#x8BED;&#x53E5;
</code></pre>
</li>
</ul>
<ul>
<li><p>&#x5F00;&#x542F;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#xFF1A;  </p>
<pre><code class="lang-mysql">-- &#x4ECE;&#x673A;linux:
start slave ;
-- &#x68C0;&#x9A8C;  
show slave status \G    
-- &#x4E3B;&#x8981;&#x89C2;&#x5BDF;&#xFF1A; Slave_IO_Running&#x548C; Slave_SQL_Running&#xFF0C;&#x786E;&#x4FDD;&#x4E8C;&#x8005;&#x90FD;&#x662F;yes&#xFF1B;&#x5982;&#x679C;&#x4E0D;&#x90FD;&#x662F;yes&#xFF0C;&#x5219;&#x770B;&#x4E0B;&#x65B9;&#x7684; Last_IO_Error&#x3002;
&#x672C;&#x6B21; &#x901A;&#x8FC7; Last_IO_Error&#x53D1;&#x73B0;&#x9519;&#x8BEF;&#x7684;&#x539F;&#x56E0;&#x662F; &#x4E3B;&#x4ECE;&#x4F7F;&#x7528;&#x4E86;&#x76F8;&#x540C;&#x7684;server-id
-- &#x68C0;&#x67E5;:&#x5728;&#x4E3B;&#x4ECE;&#x4E2D;&#x5206;&#x522B;&#x67E5;&#x770B;serverid:  
show variables like &apos;server_id&apos; ;
-- &#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x5728;Linux&#x4E2D;&#x7684;my.cnf&#x4E2D;&#x8BBE;&#x7F6E;&#x4E86;server-id=2&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x65F6; &#x786E;&#x5B9E;server-id=1&#xFF0C;
-- &#x539F;&#x56E0;&#xFF1A;&#x53EF;&#x80FD;&#x662F; linux&#x7248;Mysql&#x7684;&#x4E00;&#x4E2A;bug&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x662F; windows&#x548C;Linux&#x7248;&#x672C;&#x4E0D;&#x4E00;&#x81F4;&#x9020;&#x6210;&#x7684;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;&#x3002;
-- &#x89E3;&#x51B3;&#x6539;bug&#xFF1A; 
set global server_id =2 ;

stop slave ;
set global server_id =2 ;
start slave ;
show slave status \G

-- &#x6F14;&#x793A;&#xFF1A;&#x4E3B;windows =&gt; &#x4ECE;linux
-- windows&#x4E0A;&#xFF0C;&#x5C06;&#x8868;&#xFF0C;&#x63D2;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x89C2;&#x5BDF;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x8BE5;&#x8868;&#x7684;&#x6570;&#x636E;
</code></pre>
</li>
</ul>
<h1 id="&#x5176;&#x4ED6;">&#x5176;&#x4ED6;</h1>
<p>b&#x7AD9;&#x5B66;&#x4E60;&#x89C6;&#x9891;&#xFF1A;<br>&#x989C;&#x7FA4; <a href="https://www.bilibili.com/video/av29072634" target="_blank">https://www.bilibili.com/video/av29072634</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="R语言.html" class="navigation navigation-prev " aria-label="Previous page: R语言">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="gdb和makefile.html" class="navigation navigation-next " aria-label="Next page: gdb和makefile">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"mysql及索引优化","level":"1.3.7","depth":2,"next":{"title":"gdb和makefile","level":"1.3.8","depth":2,"path":"1语言类/gdb和makefile.md","ref":"./1语言类/gdb和makefile.md","articles":[]},"previous":{"title":"R语言","level":"1.3.6","depth":2,"path":"1语言类/R语言.md","ref":"./1语言类/R语言.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"1语言类/mysql及索引优化.md","mtime":"2019-11-13T09:48:58.440Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-02-03T03:12:29.623Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

